!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f9891e7c-d21a-4613-830d-4c49e3f9636b",e._sentryDebugIdIdentifier="sentry-dbid-f9891e7c-d21a-4613-830d-4c49e3f9636b")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"v-2409062254-9fdfa-production"},(("undefined"!==typeof self?self:this).webpackJsonp=("undefined"!==typeof self?self:this).webpackJsonp||[]).push([[286,22,35,526,557],{1173:function(e,t,o){"use strict";o(911)},1600:function(e,t,o){"use strict";o.d(t,"a",(function(){return l})),o.d(t,"b",(function(){return s}));var n=o(606),i=o(659),a=o(1773);const r=new Map;function l(e){if(r.has(e))return r.get(e);const t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t);const o={style:t,remove(){t.remove(),r.delete(e)},update(n){r.delete(e),t.innerHTML=e,r.set(n,o)}};return r.set(e,o),o}function s(e,{numericUnit:t}={}){return Object(n.a)(Object(i.a)(e,(e=>Number.isNaN(Number(e))||null==t?e.toString():`${e}${t}`)),((e,t)=>`--${Object(a.a)(t)}`))}},1607:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var n=o(2),i=o(0);function a(e,t){let o=null,a=null;Object(i.onMounted)((()=>{const r=Object(i.unref)(e);o=new n.b.ResizeObserver((e=>{e.forEach((e=>{t(r,e.contentRect)}))})),null===o||void 0===o||o.observe(r),a=r})),Object(i.onUnmounted)((()=>{null!=a&&(null===o||void 0===o||o.unobserve(a),a=null)}))}},1622:function(e,t,o){"use strict";o.d(t,"a",(function(){return n})),o.d(t,"b",(function(){return i}));const n=256,i=380},1627:function(e,t,o){"use strict";!function(e){function t(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var o=e.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(t,!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}}if(e.support.touch="ontouchend"in document,e.support.touch){var o,n=e.ui.mouse.prototype,i=n._mouseInit,a=n._mouseDestroy;n._touchStart=function(e){!o&&this._mouseCapture(e.originalEvent.changedTouches[0])&&(o=!0,this._touchMoved=!1,t(e,"mouseover"),t(e,"mousemove"),t(e,"mousedown"))},n._touchMove=function(e){o&&(this._touchMoved=!0,t(e,"mousemove"))},n._touchEnd=function(e){o&&(t(e,"mouseup"),t(e,"mouseout"),this._touchMoved||t(e,"click"),o=!1)},n._mouseInit=function(){var t=this;t.element.bind({taphold:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),i.call(t)},n._mouseDestroy=function(){var t=this;t.element.unbind({taphold:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),a.call(t)}}}(o(62).b)},1628:function(e,t,o){"use strict";o.d(t,"d",(function(){return i})),o.d(t,"c",(function(){return a})),o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return l}));var n=o(2);async function i(e){var t;if(n.b.jsPlumbInstance=null===(t=await r())||void 0===t?void 0:t.newInstance(e),null!=n.b.jsPlumbInstance)return n.b.jsPlumbInitiated=!0,n.b.jsPlumbInstance}function a(){return n.b.jsPlumbInstance}async function r(){return await new Promise((e=>{Promise.all([o.e(61),o.e(519)]).then(o.bind(null,1844)).then((t=>{e(t)})).catch((t=>{e(void 0)}))}))}async function l(){return await new Promise((e=>{Promise.all([o.e(61),o.e(520)]).then(o.bind(null,1845)).then((({BezierConnector:t})=>{e(t)})).catch((t=>{e(void 0)}))}))}},1633:function(e,t,o){},1634:function(e,t,o){var n=o(1691);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,o(133).default)("6b40c42e",n,!0,{})},1635:function(e,t,o){},1636:function(e,t,o){},1639:function(e,t,o){"use strict";var n=o(0),i=o(280),a=o(709),r=Object(n.defineComponent)({__name:"SurfaceLazy",props:{tag:{default:"div"},minHeight:null,minWidth:null,renderImmediately:{type:Boolean,default:!1}},setup(e){const t=e,o=Object(n.ref)(t.renderImmediately),r=Object(n.ref)(null);return Object(n.onMounted)((()=>{o.value||Object(a.a)((()=>{null!==r.value&&Object(i.b)(r.value,(()=>{Object(a.a)((()=>{o.value=!0}))}))}))})),{__sfc:!0,props:t,isVisible:o,rootElement:r}}}),l=o(13),s=Object(l.a)(r,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t(e.tag,{ref:"rootElement",tag:"component",style:[!o.isVisible&&{minHeight:`${e.minHeight}px`,minWidth:`${e.minWidth}px`}]},[o.isVisible?e._t("default"):e._e()],2)}),[],!1,null,null,null);t.a=s.exports},1640:function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),o.d(t,"d",(function(){return l})),o.d(t,"c",(function(){return s})),o.d(t,"b",(function(){return c}));var n=o(36),i=o(216),a=o(1);function r(e){if(""===e||void 0===e||null===e)return{date:"",time:""};return{date:new Date(e).toLocaleString(n.d,{month:"short",day:"numeric"}),time:new Date(e).toLocaleString(n.d,{hour:"numeric",minute:"numeric",hour12:!0})}}function l(e){const t=new Date(e);if(isNaN(t.valueOf()))return Object(a.b)("Invalid date");const o=new Date;if(t<o)return Object(a.b)("Can't schedule in the past");const n=new Date(o);return n.setFullYear(o.getFullYear()+1),t>=n?Object(a.b)("Can't schedule over one year in the future"):null}function s(e){return Object(i.g)(c(e))}function c(e){if(null!=e)return new Date(e);const t=new Date;return t.setMinutes(t.getMinutes()+5),t}},1647:function(e,t,o){"use strict";var n=o(37),i=o(117),a=o(165),r=o(184),l=o(95),s=o(0),c=o(10);var d=o(51),u=o(451),p=o(16),b=o(15),m=o(1588),v=o(280),h=o(363),f=o(147),g=o(1622),x=o(96),O=o(202),y=o(1640),w=o(166),j=o(14),S=o(140),k=o(29),C=o(25),_=o(85),P=o(102),B=o(67),M=o(107),D=o(42),z=o(80),I=o(34),T=o(333),$=o(1674),E=o(912),A=o(56),L=o(64),R=o(1667),W=o(905),F=o(9),G=Object(s.defineComponent)({__name:"SurfacePostMoreActions",props:{post:null,backgroundColor:null,colorScheme:null,xOverlay:{type:Boolean,default:!0},xFillerElements:{type:Boolean,default:!0}},emits:["dropdown","edit"],setup(e,{emit:t}){const o=e,n=W.a,i=p.a.touchable,{isStream:a,isTimeline:r,isMap:l,isScreenshotMode:c,user:d,isFrozen:u}=Object(F.g)(Object(C.useSurfaceStore)()),{canIEdit:b,canIWrite:m}=Object(F.g)(Object(B.a)()),v=Object(s.ref)(!1),h=Object(s.ref)(!1),g=Object(s.computed)((()=>r.value||l.value)),x=Object(s.computed)((()=>{var e;return o.post.author_id===(null===(e=d.value)||void 0===e?void 0:e.id)})),O=Object(s.computed)((()=>!u.value&&!i&&(b.value||m.value&&x.value))),y=Object(s.computed)((()=>"light"===o.colorScheme)),w=Object(s.computed)((()=>Object(f.m)({postColor:o.backgroundColor,isLightColorScheme:y.value}))),j=Object(s.computed)((()=>{switch(o.backgroundColor){case"red":return y.value?"corner-scarlet-100":"corner-scarlet-900";case"orange":return y.value?"corner-canary-100":"corner-tangerine-900";case"green":return y.value?"corner-park-100":"corner-park-900";case"blue":return y.value?"corner-oceanic-100":"corner-oceanic-900";case"purple":return y.value?"corner-grape-100":"corner-grape-900";default:return y.value?"corner-light-ui-100":"corner-dark-ui-100"}}));return{__sfc:!0,vEmitClickOnTouch:n,isTouchable:i,props:o,emit:t,isStream:a,isTimeline:r,isMap:l,isScreenshotMode:c,user:d,isFrozen:u,canIEdit:b,canIWrite:m,isEditButtonFocused:v,isMoreActionsButtonFocused:h,isWishContentScrollable:g,isPostAuthor:x,xEditPost:O,isLightColorScheme:y,bgColorClass:w,cornerColorClass:j,onMoreActionsButtonClick:function(e){const o=e.currentTarget,n=Object(R.e)(o),i=Object(R.e)(o.firstElementChild),a=i.x+i.width/2,r=i.y+i.height/2,l=r-n.y,s=a-l,c=n.y,d=new DOMRect(s,c,a+l-s,r+l-c);t("dropdown",d)},OzIcon:A.default,OzPlainButton:L.default,OzPlainButtonColorScheme:L.OzPlainButtonColorScheme}}}),H=(o(1689),o(13)),U=Object(H.a)(G,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return o.isScreenshotMode?e._e():t("div",{class:{absolute:!0,"z-10":!0,"top-0 ltr:right-0 rtl:left-0":!0,group:!0,"ltr:rounded-tr-xl rtl:rounded-tl-xl":!0}},[t("div",[t("div",{class:{"h-[29px] w-min":!0,relative:!0,flex:!0,"ltr:pl-1 rtl:pr-1":!0,"overflow-visible":o.isTouchable}},[o.xEditPost?t("div",{class:{"transition-transform":!0,"translate-x-0":o.isEditButtonFocused,"ltr:translate-x-full rtl:-translate-x-full group-hover:translate-x-0":!o.isEditButtonFocused,"ltr:rounded-bl-lg rtl:rounded-br-lg":!0,"ltr:pr-[9px] rtl:pl-[9px]":!0,"pt-[3px] ltr:mr-[-8px] rtl:ml-[-8px]":!0,"flex justify-start items-start":!0,[o.bgColorClass]:!0}},[e.xOverlay&&!o.isWishContentScrollable?t("div",{class:{absolute:!0,"ltr:left-[-4px] rtl:right-[-4px] top-[7px]":!o.isStream,"ltr:left-[-4px] rtl:right-[-4px] top-[11px]":o.isStream,"rtl:-scale-x-100":!0,[o.cornerColorClass]:!0}}):e._e(),e._v(" "),t(o.OzPlainButton,{class:["font-semibold","text-body-extra-small","py-0","px-1.5","h-4","mt-[5px]","mb-[5px]","light"===e.colorScheme&&"focus-visible:text-grape-500","dark"===e.colorScheme&&"focus-visible:text-canary-500"],attrs:{"color-scheme":o.OzPlainButtonColorScheme.SecondaryIcon,"dark-mode":"dark"===e.colorScheme,"size-preset":null,text:e.__("Edit"),"aria-label":e.__("Edit this post")},on:{click:function(t){return e.$emit("edit")},focus:function(e){o.isEditButtonFocused=!0},blur:function(e){o.isEditButtonFocused=!1}}})],1):e._e(),e._v(" "),o.xEditPost?t("div",{class:{"z-20":!0,"opacity-0":!e.xFillerElements||!o.isEditButtonFocused||o.isMoreActionsButtonFocused,"opacity-100":e.xFillerElements&&o.isEditButtonFocused,"group-hover:opacity-100":e.xFillerElements&&!o.isEditButtonFocused&&!o.isMoreActionsButtonFocused,"transition-opacity":!0,"h-4 mt-[8px] mb-[5px]":!0,"w-[0px]":!0,"border-r-[0.5px] border-solid":!0,"border-dark-text-400":"light"===e.colorScheme,"border-light-text-400":"dark"===e.colorScheme}}):e._e(),e._v(" "),t("div",{class:{"w-5.5 pt-[3px] h-[26px]":!0,flex:!0,relative:!0,"overflow-visible":!0,"justify-end":!0,"ltr:rounded-bl-lg rtl:rounded-br-lg":!0,[o.bgColorClass]:!0}},[e.xOverlay&&!o.isWishContentScrollable?t("div",{class:[{absolute:!0,"ltr:left-[-4px] rtl:right-[-4px] top-[7px]":!o.isStream,"ltr:left-[-4px] rtl:right-[-4px] top-[11px]":o.isStream,"rtl:-scale-x-100":!0,[o.cornerColorClass]:!0},{"opacity-0":!e.xFillerElements||o.xEditPost&&o.isEditButtonFocused||o.isMoreActionsButtonFocused,"transition opacity-100 group-hover:opacity-0":e.xFillerElements&&o.xEditPost&&!o.isEditButtonFocused&&!o.isMoreActionsButtonFocused}]}):e._e(),e._v(" "),t(o.OzPlainButton,{directives:[{name:"emit-click-on-touch",rawName:"v-emit-click-on-touch"}],class:["post-actions-button","shrink-0",!o.isTouchable&&["h-[26px]","w-5.5","py-0","px-[3px]"],o.isTouchable&&["w-[48px]","h-[42px]","pl-[29px] pr-[3px] rtl:pr-[29px] rtl:pl-[3px]","pt-[3px] pb-[20px]"],"light"===e.colorScheme&&"focus-visible:text-grape-500 focus-visible:border-grape","dark"===e.colorScheme&&"focus-visible:text-canary-500 focus-visible:border-canary","border-2 focus-visible:border-solid border-transparent rounded-lg","flex items-center justify-center"],attrs:{"color-scheme":o.OzPlainButtonColorScheme.SecondaryIcon,"dark-mode":"dark"===e.colorScheme,"size-preset":null,"aria-label":e.__("More post actions"),title:e.__("More post actions"),"data-testid":"surfacePostMoreActionsButton"},on:{click:o.onMoreActionsButtonClick,focus:function(e){o.isMoreActionsButtonFocused=!0},blur:function(e){o.isMoreActionsButtonFocused=!1}}},[t(o.OzIcon,{attrs:{name:"more_vertical",size:16}})],1)],1)]),e._v(" "),e.xOverlay&&!o.isWishContentScrollable?t("div",{class:[{absolute:!0,"bottom-[-4px] ltr:right-[7px] rtl:left-[7px]":!o.isStream,"bottom-[-4px] ltr:right-[11px] rtl:left-[11px]":o.isStream,"rtl:-scale-x-100":!0,[o.cornerColorClass]:!0,"opacity-0":!e.xFillerElements||o.isMoreActionsButtonFocused}]}):e._e()])])}),[],!1,null,"ef27c07a",null).exports,N=Object(s.defineComponent)({__name:"SurfacePostBeingShowed",props:{index:null,post:null,fitHeightToContainer:{type:Boolean},verticallyCenterContent:{type:Boolean},postReactionIds:{default:()=>[]},postCommentIds:{default:()=>[]}},setup(e){const t=e,i=Object(j.b)((()=>o.e(459).then(o.bind(null,2514)))),A=Object(j.b)((()=>o.e(455).then(o.bind(null,3149)))),L=Object(j.b)((()=>o.e(417).then(o.bind(null,1806)))),R=Object(j.b)((()=>o.e(556).then(o.bind(null,2187)))),W=Object(j.b)((()=>Promise.all([o.e(52),o.e(554)]).then(o.bind(null,3150)))),G=Object(j.b)((()=>o.e(467).then(o.bind(null,2511)))),H=Object(j.b)((()=>Promise.all([o.e(24),o.e(60)]).then(o.bind(null,1913)))),N=Object(j.b)((()=>Promise.resolve().then(o.bind(null,56)))),V={timeline:g.a,table:300},q=p.a.safari,Y=Object(s.ref)(),X=Object(s.ref)(),Z=Object(s.ref)(),K=Object(s.ref)(),J=Object(s.ref)(),Q=Object(s.ref)(),{colorScheme:ee,xAuthor:te,libraryId:oe,xCommentsUnderPosts:ne,isPostSizeWide:ie,isPostSizeStandard:ae,isFrozen:re,isUsedInEducationalContext:le,tenantId:se,isStream:ce,isCanvas:de,isSectioned:ue,isMap:pe,isTimeline:be,fontId:me,xReactionsInScreenshotMode:ve,xCommentsInScreenshotMode:he,isScreenshotMode:fe,user:ge,format:xe}=Object(F.g)(Object(C.useSurfaceStore)()),{isSmallerThanDesktop:Oe,windowWidth:ye}=Object(F.g)(Object(I.b)()),{isDemoPadletPanelDesktop:we}=Object(F.g)(Object(P.e)()),je=Object(M.e)(),{wallCustomPostProperties:Se,isLocationEnabled:ke}=Object(F.g)(je),{getDisplayedColorForPost:Ce,shouldShowPostProperties:_e}=je,{postToConnectFromId:Pe,connections:Be}=Object(F.g)(Object(r.a)()),Me=Object(s.computed)((()=>151209===se.value||4===oe.value||Object(b.a)("surfaceRoleBadges")&&le.value)),De=Object(s.computed)((()=>_e(t.post))),ze=Object(s.computed)((()=>Ce(t.post))),Ie=Object(s.computed)((()=>"dark"===ee.value)),Te=Object(s.computed)((()=>Object(f.m)({postColor:ze.value,isLightColorScheme:!Ie.value}))),$e=Object(s.computed)((()=>Object(h.a)(q))),Ee=Object(s.computed)((()=>Ft.value&&!jt.value)),Ae=Object(s.computed)((()=>Object(x.c)(t.post))),Le=Object(s.computed)((()=>Object(x.a)(t.post))),Re=Object(s.computed)((()=>Ee.value||Ae.value||Le.value)),We=Object(s.computed)((()=>fe.value?ct.value||he.value&&(t.postCommentIds.length>0||dt.value):ct.value||t.postCommentIds.length>0||!ne.value));function Fe(e,t){return Be.value.filter((o=>o.from_wish_id===e&&o.to_wish_id===t||o.from_wish_id===t&&o.to_wish_id===e)).length>0}const Ge=Object(s.computed)((()=>!!Pe.value&&Pe.value!==t.post.id&&!Fe(t.post.id,Pe.value))),He=Object(s.computed)((()=>{if(null!=t.post.scheduled_at)return Object(w.b)(t.post.scheduled_at)})),Ue=Object(s.computed)((()=>Object(y.a)(t.post.scheduled_at))),Ne=Object(s.computed)((()=>t.post.subject)),Ve=Object(s.computed)((()=>!!Ne.value)),qe=Object(s.computed)((()=>t.post.body)),Ye=Object(s.computed)((()=>!!qe.value)),Xe=Object(s.computed)((()=>Object(m.a)(me.value))),Ze=Object(s.computed)((()=>!(te.value||!Ve.value)||!(te.value||Ve.value||Qe.value||et.value))),Ke=Object(s.computed)((()=>!te.value&&!Ze.value)),Je=Object(s.computed)((()=>be.value||pe.value)),Qe=Object(s.computed)((()=>{const e=t.post.attachment;return!!e&&Object(n.j)(e)})),et=Object(s.computed)((()=>{var e,o,n;return"poll"===(null===(n=null===(o=null===(e=t.post)||void 0===e?void 0:e.wish_content)||void 0===o?void 0:o.attachment_props)||void 0===n?void 0:n.type)})),tt=Object(s.computed)((()=>{var e,o;return et.value?null===(o=null===(e=t.post)||void 0===e?void 0:e.wish_content)||void 0===o?void 0:o.attachment_props:null})),ot=Object(s.computed)((()=>!Ft.value&&(mt.value||ct.value))),{isReactable:nt,isPreviewing:it}=Object(F.g)(Object(z.a)()),{currentReactionData:at,originalReactionData:rt,accumulatedReactionsByWishId:lt}=Object(F.g)(Object(l.a)()),st=Object(s.computed)((()=>it.value?at.value:rt.value)),ct=Object(s.computed)((()=>{var e;if(fe.value&&!ve.value)return!1;const o=null!=t.post.id?null===(e=lt.value[t.post.id])||void 0===e?void 0:e.totalReactionsCount:0;return(nt.value||t.postReactionIds.length>0||void 0!==o&&o>0)&&!!st.value})),{isCommentable:dt}=Object(F.g)(Object(z.a)()),{commentEntities:ut}=Object(F.g)(Object(_.b)()),{fetchComments:pt}=Object(_.b)(),bt=Object(s.computed)((()=>ut.value)),mt=Object(s.computed)((()=>!(fe.value&&!he.value)&&(!0===t.post.published&&(dt.value||t.postCommentIds.length>0)))),vt=Object(s.ref)(!1),ht=Object(s.ref)({}),ft=Object(s.ref)({});let gt=null;const xt=Object(s.computed)((()=>vt.value&&!Je.value&&!!t.post.attachment));function Ot(e){var t;null===(t=J.value)||void 0===t||t.postMessage(e)}function yt(e){Ot("back-to-preview"),Pt({postCid:e.cid,xTextPanel:!Oe.value})}function wt(){Object(s.nextTick)((()=>{var e,t,o,n,i;if(!xt.value)return;const a=null===(t=null===(e=J.value)||void 0===e?void 0:e.$refs)||void 0===t?void 0:t.embedWrapper;if(!a||!J.value)return;const r=a.offsetHeight,l=8+parseInt(window.getComputedStyle(Z.value).paddingTop,10)+parseInt(window.getComputedStyle(J.value.$el).marginTop,10),s=(null===(o=Y.value)||void 0===o?void 0:o.offsetHeight)||0,c=(null===(n=X.value)||void 0===n?void 0:n.offsetHeight)||0,d=(null===(i=K.value)||void 0===i?void 0:i.offsetHeight)||0;ft.value={top:-(d-r-c-s-l)+"px"}}))}Object(s.watch)(xt,(e=>{if(null===gt||void 0===gt||gt.disconnect(),gt=null,e){if(void 0===K.value)return;const e=Object(O.a)(K.value,wt);if(!e)return;if(void 0===X.value)return;e.observe(X.value),Y.value&&e.observe(Y.value),gt=e}}));const{canIModerate:jt,canIComment:St,canIWrite:kt}=Object(F.g)(Object(B.a)()),Ct=Object(s.computed)((()=>!!ge.value.id&&t.post.author_id===ge.value.id)),_t=Object(s.computed)((()=>jt.value||Ct.value&&kt.value)),{expandPost:Pt}=Object(S.a)(),{showPostActionMenu:Bt,setPostActionMenuTriggerRect:Mt,setPostRightClickCoordinates:Dt}=Object(a.a)(),{startEditingPost:zt}=Object(D.a)(),It=p.a.mobile;const{openConfirmationDialog:Tt}=Object(k.c)(),{stopEditingComment:$t,showCommentActionMenu:Et,createCommentV2:At,editCommentV2:Lt}=Object(_.b)(),{approvePost:Rt}=Object(a.a)(),{rejectPost:Wt}=Object(D.a)(),Ft=Object(s.computed)((()=>!t.post.published)),Gt=Object(s.computed)((()=>Object(f.d)({postColor:ze.value,isLightColorScheme:!Ie.value})));const Ht=Object(s.ref)(0);let Ut=null;function Nt(){Ut=Object(O.a)(Q.value,Object(T.a)(((e,t)=>{Ht.value=t.width}),100))}function Vt(){null===Ut||void 0===Ut||Ut.disconnect(),Ut=null}const qt=Object(s.computed)((()=>{var e;const o=Math.ceil(Ht.value);switch(xe.value){case"stream":{const e=ie.value?748:540;return ye.value<=I.a.TabletPortrait?o:e}case"grid":case"matrix":return o;case"free":return t.post.width||g.a;case"timeline_v2":return ie.value?g.b:g.a;case"map":return ie.value?g.b:g.a;default:return null!==(e=V[xe.value])&&void 0!==e?e:Math.ceil(t.post.width||0)||1920}}));let Yt=()=>{};Object(s.onMounted)((()=>{var e,o;if(Object(b.a)("surfaceCommentsPerPost")){const e=window.self!==window.top&&(p.a.safari||p.a.ios);v.a&&!e?Object(v.b)(Q.value,(()=>{t.post.id&&t.post.hashid&&pt({wishId:t.post.id,wishHashid:t.post.hashid})})):t.post.id&&t.post.hashid&&pt({wishId:t.post.id,wishHashid:t.post.hashid})}Yt=function(e,t){let o,n=0;const i=()=>{clearTimeout(o),o=null,n=0};return a=>{var r,l,s;null!==(l=null===(r=null===t||void 0===t?void 0:t.skipIf)||void 0===r?void 0:r.call(t,a))&&void 0!==l&&l||(n++,1===n?o=setTimeout((()=>{try{e(a)}catch(a){Object(c.a)(a)}finally{i()}}),null!==(s=null===t||void 0===t?void 0:t.delayMs)&&void 0!==s?s:300):i())}}((()=>{yt(t.post)}),{skipIf:e=>{var t,o,n;return null!==(n=e.target instanceof HTMLElement&&(null===(o=null===(t=e.target.closest(".surface-post"))||void 0===t?void 0:t.classList)||void 0===o?void 0:o.contains("noclick")))&&void 0!==n&&n}}),Ht.value=null!==(o=null===(e=Q.value)||void 0===e?void 0:e.offsetWidth)&&void 0!==o?o:0,xe.value in V||Nt()}));const Xt=Object(s.ref)(!0);return Object(s.onBeforeUnmount)((()=>{Vt()})),{__sfc:!0,SurfacePostAuthor:i,SurfacePostModeration:A,SurfacePostProperties:L,SurfacePostSocialContentTopBar:R,SurfacePostComments:W,SurfacePostAttachmentEmbedControl:G,SurfacePostPoll:H,OzIcon:N,FIXED_POST_WIDTH:V,isSafari:q,postBannerRef:Y,beforeAttachmentRef:X,userContentRef:Z,postContentRef:K,attachmentRef:J,surfacePostBeingShowedRef:Q,props:t,colorScheme:ee,xAuthor:te,libraryId:oe,xCommentsUnderPosts:ne,isPostSizeWide:ie,isPostSizeStandard:ae,isFrozen:re,isUsedInEducationalContext:le,tenantId:se,isStream:ce,isCanvas:de,isSectioned:ue,isMap:pe,isTimeline:be,fontId:me,xReactionsInScreenshotMode:ve,xCommentsInScreenshotMode:he,isScreenshotMode:fe,user:ge,format:xe,isSmallerThanDesktop:Oe,windowWidth:ye,isDemoPadletPanelDesktop:we,surfacePostPropertiesStore:je,wallCustomPostProperties:Se,isLocationEnabled:ke,getDisplayedColorForPost:Ce,shouldShowPostProperties:_e,postToConnectFromId:Pe,connections:Be,xRoleBadge:Me,xPostProperties:De,displayedPostColor:ze,isPadletColorSchemeDark:Ie,postColorClass:Te,getOverflowBorderRadiusTransformFixStyle:$e,isAwaitingApproval:Ee,isScheduled:Ae,xPin:Le,xPostBanner:Re,xPostSocialContentTopBar:We,areConnected:Fe,xConnect:Ge,scheduledAtDateString:He,formattedScheduledDateAndTime:Ue,subject:Ne,xSubject:Ve,body:qe,xBody:Ye,tailwindFontClass:Xe,xInvisibleFloatingDiv:Ze,xOverlayForMoreButtons:Ke,isWishContentScrollable:Je,xAttachment:Qe,xPoll:et,poll:tt,xSocialContent:ot,isReactable:nt,isPreviewing:it,currentReactionData:at,originalReactionData:rt,accumulatedReactionsByWishId:lt,reactionData:st,xReactions:ct,isCommentable:dt,commentEntities:ut,fetchComments:pt,wallComments:bt,xComments:mt,xEmbedControl:vt,embedData:ht,embedControlPositionStyle:ft,embedControlRepositionObserver:gt,shouldSyncEmbedControlSize:xt,toggleEmbedControl:function({xEmbed:e,downloadUrl:t,isDownloadable:o}){ht.value={downloadUrl:t,isDownloadable:o},vt.value=e},postMessageToAttachment:Ot,expand:yt,calculateEmbedControlPosition:wt,canIModerate:jt,canIComment:St,canIWrite:kt,wasWrittenByCurrentUser:Ct,isEditableByCurrentUser:_t,expandPost:Pt,showPostActionMenu:Bt,setPostActionMenuTriggerRect:Mt,setPostRightClickCoordinates:Dt,startEditingPost:zt,isMobile:It,tryShowActions:function(e){var o;It||Ge.value||["a","textarea","input","select","option"].includes((null===(o=e.target.tagName)||void 0===o?void 0:o.toLowerCase())||"")||e.shiftKey||(e.preventDefault(),Dt({postRightClickCoordinates:[e.pageX,e.pageY]}),Bt({postCid:t.post.cid}))},showPostMoreActionsDropdown:function(e){Mt({postActionMenuTriggerRect:e}),Bt({postCid:t.post.cid})},tryStartEditPost:function(){re.value||_t.value&&zt({postCid:t.post.cid})},openConfirmationDialog:Tt,stopEditingComment:$t,showCommentActionMenu:Et,createCommentV2:At,editCommentV2:Lt,approvePost:Rt,rejectPost:Wt,isPostNotApproved:Ft,postBannerBgColorClass:Gt,confirmModerationReject:function(){Tt(Object.assign(Object.assign({},d.i),{afterConfirmActions:[()=>Wt(t.post.id,t.post.hashid)],xShadow:!0}))},clientWidth:Ht,resizeObserver:Ut,observeResize:Nt,unobserveResize:Vt,displayedPostWidth:qt,saveEditComment:function({id:e,body:t,attachment:o}){Lt({id:e,htmlBody:t,attachment:o})},publishComment:function({postId:e,body:t,attachment:o}){At({postId:e,htmlBody:t,attachment:o})},expandPostOnSingleClick:Yt,xPostMoreActionsFillerElements:Xt,dir:u.a,SurfacePostAttachment:$.a,SurfacePostBody:E.a,SurfacePostMoreActions:U}}}),V=(o(1690),Object(H.a)(N,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("article",{ref:"surfacePostBeingShowedRef",class:[o.postBannerBgColorClass,o.isStream?"rounded-2xl":"rounded-xl",o.isCanvas&&"fix-click-on-touch"],attrs:{dir:o.dir(),"data-testid":"surfacePost",tabindex:"0"},on:{focus:function(t){return e.$emit("focus")}}},[o.xPostBanner?t("div",{ref:"postBannerRef",class:[o.isPadletColorSchemeDark?"text-light-text-100":"text-dark-text-100","text-body-small-posts","font-sans","flex","items-center",o.isStream?"h-10 ps-4":"h-9 ps-3"],attrs:{"data-testid":"postBanner"},on:{contextmenu:o.tryShowActions}},[o.isScheduled?t("div",{class:["flex flex-row gap-1",o.isPadletColorSchemeDark?"text-light-text-200":"text-dark-text-200"],attrs:{"data-testid":"postScheduleDisplay"}},[t(o.OzIcon,{attrs:{name:"recent_outline",size:16}}),e._v(" "),t("time",{staticClass:"text-body-extra-small",attrs:{title:o.scheduledAtDateString,datetime:e.post.scheduled_at}},[e._v("\n        "+e._s(e.__("{date} at {time}",{date:o.formattedScheduledDateAndTime.date,time:o.formattedScheduledDateAndTime.time}))+"\n      ")])],1):o.isAwaitingApproval?t("span",{staticClass:"italic"},[e._v("\n      "+e._s(e.__("Awaiting approval"))+"\n    ")]):o.xPin?t("div",{class:["flex items-center gap-2",o.isPadletColorSchemeDark?"text-light-text-200":"text-dark-text-200"]},[t(o.OzIcon,{attrs:{name:"pin_filled",size:16}}),e._v(" "),t("span",{staticClass:"text-body-small"},[e._v(e._s(e.__("Pinned")))])],1):e._e()]):e._e(),e._v(" "),t("div",{class:["wish-content","relative",o.tailwindFontClass,{"h-full":e.fitHeightToContainer,"rounded-2xl":o.isStream,"rounded-xl":!o.isStream}],attrs:{"data-index":e.index+1}},[t("div",{ref:"postContentRef",class:[o.postColorClass,{"map-wish":o.isMap,"timeline-wish flex flex-col":o.isTimeline,"unapproved-wish":o.isPostNotApproved,"overflow-hidden":!0,"h-full":e.fitHeightToContainer,"flex flex-col items-stretch justify-center":e.verticallyCenterContent,"rounded-2xl":o.isStream,"rounded-xl":!o.isStream}],style:o.getOverflowBorderRadiusTransformFixStyle,attrs:{"data-post-color":o.displayedPostColor||"default"},on:{contextmenu:o.tryShowActions}},[o.isWishContentScrollable||o.isDemoPadletPanelDesktop?e._e():t(o.SurfacePostMoreActions,{class:{"pe-0.5":o.isStream&&o.isPostSizeWide},attrs:{"x-overlay":o.xOverlayForMoreButtons,post:e.post,"color-scheme":o.colorScheme,"background-color":o.displayedPostColor,"x-filler-elements":o.xPostMoreActionsFillerElements},on:{edit:function(t){return o.startEditingPost({postCid:e.post.cid})},dropdown:o.showPostMoreActionsDropdown}}),e._v(" "),t("div",{class:{"map-wish":o.isMap&&!o.xSocialContent,"map-wish-with-stalker-bar":o.isMap&&o.xSocialContent,"overflow-x-hidden":o.isWishContentScrollable,"overflow-y-auto":o.isWishContentScrollable,"scrollbar-regular":"light"===o.colorScheme,"scrollbar-regular-dark":"dark"===o.colorScheme}},[t("div",{ref:"userContentRef",class:[o.isStream&&{"pb-1":o.xPostProperties,"pb-2":!o.xPostProperties&&o.xBody,"pb-3":!o.xPostProperties&&!o.xBody,"pt-3":o.isPostSizeStandard||o.isPostSizeWide,"px-3":o.isPostSizeStandard,"px-3.5":o.isPostSizeWide},!o.isStream&&{"pt-2 px-2":!0,"pb-1":o.xPostProperties,"pb-2":!o.xPostProperties&&(o.xBody||o.xAttachment),"pb-2.5":!o.xPostProperties&&!o.xBody&&!o.xAttachment&&o.xSubject}]},[t("div",{ref:"beforeAttachmentRef"},[o.xAuthor?t("div",{staticClass:"flex",on:{dblclick:o.tryStartEditPost}},[t(o.SurfacePostAuthor,{class:{"px-1":!0,grow:!0,"min-w-0":!0},attrs:{"data-testid":"surfacePostAuthor",post:e.post,"avatar-size":o.xRoleBadge&&!o.isStream?24:o.isStream?20:16}}),e._v(" "),t("div",{staticClass:"w-4 h-1 shrink-0"})],1):e._e(),e._v(" "),o.xInvisibleFloatingDiv?t("div",{staticClass:"ltr:float-right rtl:float-left w-4 h-5"}):e._e(),e._v(" "),o.subject?t(o.isSectioned?"h3":"h2",{tag:"component",class:{"text-light-text-100":"dark"===o.colorScheme,"text-dark-text-100":"light"===o.colorScheme,"text-17":!o.isStream,"text-heading-3":o.isStream,"font-semibold":!0,"px-1":!0,"mt-2":!o.isStream&&o.xAuthor,"mt-3":o.isStream&&o.xAuthor,"break-words":!0,"whitespace-break-spaces":!0},staticStyle:{"word-break":"break-word"},attrs:{dir:"auto","data-testid":"postSubject","data-pw":"postSubject"},on:{dblclick:o.tryStartEditPost}},[e._v(e._s(o.subject))]):e._e()],1),e._v(" "),o.xAttachment?t(o.SurfacePostAttachment,{key:e.post.attachment,ref:"attachmentRef",class:{"mt-3":o.isStream&&(o.xAuthor||o.xSubject),"mt-1.5":!o.isStream&&o.xSubject,"mt-2":!o.isStream&&!o.xSubject&&o.xAuthor},attrs:{dir:o.dir(),post:e.post,"displayed-post-width":o.displayedPostWidth,"is-editable-by-current-user":o.isEditableByCurrentUser},on:{"toggle-embed-control":o.toggleEmbedControl,"focus-attachment":function(e){o.xPostMoreActionsFillerElements=!1},"blur-attachment":function(e){o.xPostMoreActionsFillerElements=!0}},nativeOn:{contextmenu:function(e){e.preventDefault()}}}):e._e(),e._v(" "),o.xPoll?t(o.SurfacePostPoll,{class:[!o.isStream&&!o.xAttachment&&!o.xSubject&&"mb-2",!o.xOverlayForMoreButtons&&"mt-1.5"],attrs:{poll:o.poll,"poll-caption":e.post.attachment_caption,post:e.post,user:o.user,"dark-mode":"dark"===o.colorScheme,"background-color":o.displayedPostColor},on:{dblclick:o.tryStartEditPost,click:o.expandPostOnSingleClick,enter:function(t){return o.expand(e.post)}}}):e._e(),e._v(" "),o.isWishContentScrollable&&!o.isDemoPadletPanelDesktop?t(o.SurfacePostMoreActions,{attrs:{post:e.post,"color-scheme":o.colorScheme,"background-color":o.displayedPostColor},on:{edit:function(t){return o.startEditingPost({postCid:e.post.cid})},dropdown:o.showPostMoreActionsDropdown}}):e._e(),e._v(" "),o.xBody?t(o.SurfacePostBody,{class:{"wish-body-content-stream":o.isStream,"text-14":!o.isStream,"text-body-posts":o.isStream,"px-1":!0,"pt-1.5":o.xSubject&&!o.xAttachment,"pt-2":!o.xSubject&&o.xAuthor||o.xAttachment,"pb-1":!0},attrs:{content:o.body,"dark-mode":"dark"===o.colorScheme,"data-color":o.displayedPostColor,"is-text-selectable":!1},on:{dblclick:o.tryStartEditPost}}):e._e(),e._v(" "),o.xPostProperties?t(o.SurfacePostProperties,{class:["p-1",!o.xSubject&&!o.xAttachment&&!o.xBody&&!o.xAuthor&&"pt-0"],attrs:{"dark-mode":"dark"===o.colorScheme,"location-name":o.isMap||o.isLocationEnabled?e.post.location_name:void 0,"wall-custom-post-properties":o.wallCustomPostProperties,"custom-property-values":e.post.custom_properties,"link-button-size":o.isStream?32:24,"post-color":e.post.color,"color-scheme":o.colorScheme},on:{dblclick:o.tryStartEditPost}}):e._e()],1)]),e._v(" "),o.xSocialContent?t("div",{class:[o.isPadletColorSchemeDark?"border-light-text-400":"border-dark-text-400","border-solid","border-t-0.5",o.isStream?"mx-3":"mx-2"]}):e._e(),e._v(" "),o.xSocialContent?t("section",{class:[{"box-border flex flex-row w-full":!o.xCommentsUnderPosts}]},[o.xPostSocialContentTopBar?t(o.SurfacePostSocialContentTopBar,{class:{"pt-2":!o.isStream,"pt-3":o.isStream,"px-3":!o.isStream,"px-4":o.isStream,"pb-3":!o.xComments||!o.xCommentsUnderPosts},attrs:{post:e.post,"post-reaction-ids":e.postReactionIds,"post-comment-ids":e.postCommentIds}}):e._e(),e._v(" "),o.xComments&&o.xCommentsUnderPosts?t(o.SurfacePostComments,{class:{"mt-4":o.xReactions&&e.postCommentIds.length>0},attrs:{"data-testid":"surfacePostComments",post:e.post,user:o.user,"comment-ids":e.postCommentIds,comments:o.wallComments,"can-add-comment":o.isCommentable&&o.canIComment,"displayed-post-width":o.displayedPostWidth},on:{create:function(e){return o.publishComment(e)},"show-comment-action-menu":function(e){return o.showCommentActionMenu(e)},"stop-editing":function(e){return o.stopEditingComment(e)},edit:function(e){return o.saveEditComment(e)}}}):e._e()],1):e._e()],1),e._v(" "),o.xEmbedControl?t("div",{class:["h-0","absolute","inset-x-2"]},[t(o.SurfacePostAttachmentEmbedControl,{staticClass:"absolute -bottom-3 inset-x-0",style:o.embedControlPositionStyle,attrs:{dir:o.dir(),"color-scheme":o.colorScheme,"is-downloadable":o.embedData.isDownloadable,"download-url":o.embedData.downloadUrl,"data-testid":"surfacePostAttachmentEmbedControl"},on:{"back-to-preview":function(e){return o.postMessageToAttachment("back-to-preview")},zoom:function(e){return o.postMessageToAttachment("zoom")},expand:function(t){return o.expand(e.post)},"open-in-new":function(e){return o.postMessageToAttachment("open-in-new")}}})],1):e._e()]),e._v(" "),!o.isScheduled&&o.isPostNotApproved&&o.canIModerate?t(o.SurfacePostModeration,{staticClass:"shrink-0",attrs:{"color-scheme":o.colorScheme,"moderation-violations":e.post.moderation_violations},on:{approve:function(t){return o.approvePost({postCid:e.post.cid})},reject:o.confirmModerationReject}}):e._e()],1)}),[],!1,null,"3990150c",null).exports),q=o(1677),Y=o(1628),X=o(156);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function K(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function J(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?K(Object(o),!0).forEach((function(t){Q(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):K(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function Q(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=Z(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Z(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var ee={beforeDestroy:function(){this.destroyDraggable()},methods:J(J({},Object(X.b)(["changeDragging"])),{},{initializeDraggable:function(e){var t=this;this.$_draggableMixin_onMovedPostHandler=e,this.$nextTick((function(){t.$_draggableMixin_makeDraggable()}))},destroyDraggable:function(){this.$_draggableMixin_destroyDraggable(),this.$_draggableMixin_onMovedPostHandler=null},$_draggableMixin_savePosition:function(e){this.$_draggableMixin_onMovedPostHandler({postCid:this.post.cid,position:e})},$_draggableMixin_makeDraggable:function(){var e=this,t=Object(q.a)(this.$el);t.draggable({containment:[0,0],cancel:"[contenteditable], .ui-resizable-handle, object, embed, input, textarea, button, select, option, .no-drag-canvas",cursor:"move",snap:".surface-post",snapTolerance:4,start:function(o,n){var i;t.addClass("noclick is-moving"),i=e.$el.parentElement.getBoundingClientRect(),t.draggable("option","containment",[i.left,i.top]),t.draggable("instance")._setContainment(),e.changeDragging({isAPostDragging:!0})},drag:function(t,o){var n;null===(n=Object(Y.c)())||void 0===n||n.revalidate(e.$el)},stop:function(o,n){setTimeout((function(){t.removeClass("noclick is-moving")}),100),e.$_draggableMixin_savePosition(n.position),e.changeDragging({isAPostDragging:!1})}})},$_draggableMixin_destroyDraggable:function(){if(this.$el){var e=Object(q.a)(this.$el).off(".draggable").draggable("instance");e&&e.destroy()}}})},te=o(62);o(1818),o(1627);function oe(e){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ne(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function ie(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=oe(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}!function(e,t,o){function n(){var t=e(this),o=t.data("toe")||0;0===o&&(t.on("touchstart",a),t.on("touchmove",r),t.on("touchend touchcancel",l)),t.data("toe",++o)}function i(){var t=e(this),o=t.data("toe")||0;t.data("toe",--o),0===o&&(t.off("touchstart",a),t.off("touchmove",r),t.off("touchend touchcancel",l))}var a,r,l,s=function(t){return 0<t.originalEvent.touches.length?e.extend(!0,{},t.originalEvent.touches):0<t.originalEvent.changedTouches.length?e.extend(!0,{},t.originalEvent.changedTouches):[]},c=function(e,t){return e.data("events")?e.data("events")[t]:0},d=function(e){return-45>e&&-135<e?"top":-45<=e&&45>=e?"right":45<=e&&135>e?"down":135<=e||-135>=e?"left":void 0},u=function(e,t){return 180*Math.atan2(t.pageY-e.pageY,t.pageX-e.pageX)/Math.PI},p=function(e,t){return 2===e.length&&2===t.length?Math.sqrt(Math.pow(t[0].pageX-t[1].pageX,2)+Math.pow(t[0].pageY-t[1].pageY,2))/Math.sqrt(Math.pow(e[0].pageX-e[1].pageX,2)+Math.pow(e[0].pageY-e[1].pageY,2)):0},b=function(e,t){return 2===e.length&&2===t.length?180*Math.atan2(t[0].pageY-t[1].pageY,t[0].pageX-t[1].pageX)/Math.PI-180*Math.atan2(e[0].pageY-e[1].pageY,e[0].pageX-e[1].pageX)/Math.PI:0},m=function(e,t){return Math.sqrt(Math.pow(t.pageX-e.pageX,2)+Math.pow(t.pageY-e.pageY,2))},v={touches:{},events:{},timestamp:o,prevGesture:null,offset:{},clearState:function(){v.touches={},v.events={},v.timestamp=o}},h={start:[],move:[],end:[],none:[],add:function(t,a,r,l){var s,c,d=!1;if(l)for(s=0;s<h[t].length;s++)(c=h[t][s]).priority&&c.priority<l||(h[t].splice(s,0,{gesture:a,func:r,priority:o}),d=!0);(!l||!d)&&h[t].push({gesture:a,func:r,priority:o}),f&&(e.event.special[a]={setup:n,teardown:i})},exec:function(e,t){var o;for(o=0;o<h[e].length;o++)h[e][o].func(t)}},f="ontouchstart"in t;a=e.proxy((function(t){var o=e(t.target);v.clearState(),v.touches.start=s(t),v.events.start=t,v.timestamp=(new Date).getTime(),v.events.start=t,v.offset=o.offset(),h.exec("start",t)}),this),r=e.proxy((function(e){v.timestamp&&(v.touches.move=s(e),v.events.move=e,h.exec("move",e))}),this),l=e.proxy((function(e){v.timestamp&&(v.touches.end=s(e),v.events.end=e,h.exec("end",e),v.prevGesture=v.gesture,v.clearState())}),this);var g=v;h.add("end","swipe",(function(t){var o,n=(new Date).getTime()-g.timestamp;g.touches.move&&(o=m(g.touches.start[0],g.touches.move[0]),300>n&&30<o&&(n=u(g.touches.start[0],g.touches.move[0]),n=d(n),g.gesture="swipe",e(t.target).trigger(e.Event("swipe",{originalEvent:t.originalEvent,direction:n,touches:e.extend(!0,{},g.touches)}))))}));var x,O,y,w=v;(t=h).add("end","tap",(function(t){var o=(new Date).getTime(),n=o-w.timestamp,i=e(t.target);500<n||(n=t=w.events.start.originalEvent,x&&"tap"===w.prevGesture&&300>w.timestamp-O&&x&&w.touches.start&&20>m(x[0],w.touches.start[0])?(w.gesture="doubletap",O=null,e(n.target).trigger(e.Event("doubletap",{originalEvent:n})),n=!0):n=!1,n||10>(w.touches.move?m(w.touches.start[0],w.touches.move[0]):0)&&(w.gesture="tap",O=o,x=w.touches.start,c(i,"doubletap")?setTimeout((function(){x&&"doubletap"!==w.prevGesture&&300<(new Date).getTime()-O&&i.trigger(e.Event("tap",{originalEvent:t}))}),300):i.trigger(e.Event("tap",{originalEvent:t}))))})),t.add("none","doubletap",e.noop),t.add("start","taphold",(function(t){w.gesture="taphold",clearTimeout(y),y=setTimeout((function(){w.touches.start&&!w.touches.end&&(10>(w.touches.move?m(w.touches.start[0],w.touches.move[0]):0)&&"taphold"===w.gesture&&e(t.target).trigger(e.Event("taphold",{originalEvent:w.events.start?w.events.start.originalEvent:t.originalEvent})))}),500)}));var j,S=v,k=!1;(t=h).add("move","transform",(function(t){var o,n,i=e(t.target);2===S.touches.move.length&&(o=b(S.touches.start,S.touches.move),n=p(S.touches.start,S.touches.move),"transform"===S.gesture||.1<Math.abs(1-n)||15<Math.abs(o))&&(S.gesture="transform",j={pageX:(S.touches.move[0].pageX+S.touches.move[1].pageX)/2-S.offset.left,pageY:(S.touches.move[0].pageY+S.touches.move[1].pageY)/2-S.offset.top},k||(i.trigger(e.Event("transformstart",{originalEvent:t.originalEvent,center:j,scale:n,rotation:o})),k=!0),i.trigger(e.Event("transform",{originalEvent:t.originalEvent,center:j,scale:n,rotation:o})))})),t.add("end","transformend",(function(t){var o,n,i=e(t.target);"transform"===S.gesture&&(o=b(S.touches.start,S.touches.move),n=p(S.touches.start,S.touches.move),i.trigger(e.Event("transformend",{originalEvent:t.originalEvent,center:j,scale:n,rotation:o})),k=!1)}))}(te.b,window);var ae={data:function(){return{$_resizableMixin_savePostSizeHandler:null,$_resizableMixin_previewAspectRatio:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(o),!0).forEach((function(t){ie(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ne(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},Object(F.f)(C.useSurfaceStore,["wallCreatedAt"])),beforeDestroy:function(){this.destroyResizable()},methods:{initializeResizable:function(e,t){var o=this;this.$_resizableMixin_savePostSizeHandler=t,this.$nextTick((function(){e?o.$_resizableMixin_makeResizable():o.$_resizableMixin_makeResizableTouch()}))},destroyResizable:function(){this.$_resizableMixin_destroyResizable()},$_resizableMixin_resizeAttachment:function(e){var t=this.$_resizableMixin_getAttachmentAspectRatio(),o=this.$_resizableMixin_getImageGridAspectRatio(),n=this.$_resizableMixin_getImageGridNumOfImages(),i=n>0,a={width:e,height:Math.floor(e/t)};Object(te.a)(".beethoven-preview-image",this.$el).attr(a).css(a),Object(te.a)(".beethoven-inline-embed iframe",this.$el).attr(a).css(a);var r={width:e-16,height:Math.floor((e-16)/t)};if(Object(te.a)(".surface-post-attachment-inline-embed iframe",this.$el).attr(r).css(r),i){var l=1===n?t:o,s={width:e-16,height:Math.floor((e-16)/l)};Object(te.a)(".image-grid-container",this.$el).attr(s).css(s)}else Object(te.a)(".image-thumbnail-crop-frame,.image-thumbnail-image",this.$el).attr(r).css(r)},$_resizableMixin_saveSize:function(e){this.$_resizableMixin_savePostSizeHandler({postCid:this.post.cid,size:e})},$_resizableMixin_getAttachmentAspectRatio:function(){return Object(te.a)("[data-aspect-ratio]",this.$el).data("aspect-ratio")},$_resizableMixin_getImageGridAspectRatio:function(){return Object(te.a)(".image-grid-container",this.$el).data("image-grid-aspect-ratio")},$_resizableMixin_getImageGridNumOfImages:function(){return Object(te.a)(".image-grid-container",this.$el).data("image-grid-num-of-images")||0},$_resizableMixin_makeResizable:function(){var e=this,t=Object(te.a)(this.$el),o=Object(te.a)(this.$el);t.hasClass("ui-resizable")&&t.resizable(!1);var n=Date.parse(this.wallCreatedAt)<Date.parse("2023-09-15")?48:216;t.resizable({minWidth:n,handles:"e,se",resize:function(n,i){var a,r=o.width(),l=i.size.width;r!==l&&o.width(l),e.$_resizableMixin_resizeAttachment(l),t.removeClass("auto-width"),t.css("height","auto"),i.size.width<100?t.addClass("wish-small"):t.removeClass("wish-small"),null===(a=Object(Y.c)())||void 0===a||a.revalidate(e.$el)},start:function(e,t){o.addClass("in-transit")},stop:function(t,n){var i;o.removeClass("in-transit"),(i={}).width=n.size.width,e.$_resizableMixin_saveSize(i)},zIndex:1003})},$_resizableMixin_makeResizableTouch:function(){var e=this,t={x:0,y:0},o=0,n=0,i={},a=Object(te.a)(this.$el);a.on("transformstart.resize",i,(function(n){e.$_resizableMixin_previewAspectRatio=Object(te.a)("[data-aspect-ratio]",a).data("aspect-ratio"),t.x=(n.originalEvent.touches[0].clientX+n.originalEvent.touches[1].clientX)/2,t.y=(n.originalEvent.touches[0].clientY+n.originalEvent.touches[1].clientY)/2,o=a.width(),a.addClass("in-transit")})),a.on("transform.resize",i,(function(t){n=Math.max(o*t.scale,48),a.css("width",n),e.$_resizableMixin_resizeAttachment(n)})),a.on("transformend.resize",i,(function(t){e.$_resizableMixin_saveSize({width:n}),a.removeClass("in-transit")}))},$_resizableMixin_destroyResizable:function(){if(this.$el){var e=Object(te.a)(this.$el).off(".resize").resizable("instance");e&&e.destroy()}}}},re=o(1639),le=o(23),se=o(125),ce=o(116),de=Object(s.defineComponent)({__name:"PostConnectionOverlay",props:{xConnect:{type:Boolean},isStream:{type:Boolean}},emits:["connect"],setup:e=>({__sfc:!0,tipColor:Object(s.computed)((()=>Object(ce.a)().isDarkMode?"rgb(254, 192, 6, 0.06)":"rgb(148, 102, 232, 0.1)")),label:Object(s.ref)(""),OzContainedButton:le.d,OzContainedButtonSizePreset:le.c,OzInput:se.c,OzInputSizePreset:se.b})}),ue=Object(H.a)(de,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("div",[t("form",{staticClass:"flex flex-col justify-center items-center absolute inset-0 px-3.5 gap-2 bg-grape-500/10 dark:bg-canary-500/[0.06]",class:e.isStream?"rounded-2xl":"rounded-xl",on:{submit:function(t){return t.preventDefault(),e.$emit("connect",o.label)}}},[t(o.OzInput,{staticClass:"flex-none w-full bg-light-ui-100 dark:bg-dark-ui-100",attrs:{maxlength:"50",placeholder:e.__("Label (optional)"),"aria-label":e.__("Connection label"),"size-preset":o.OzInputSizePreset.H40px,"model-value":o.label,"test-id":"postConnectionLabelInput"},on:{"update:modelValue":function(e){o.label=e}}}),e._v(" "),t(o.OzContainedButton,{staticClass:"w-full",attrs:{type:"submit",text:e.__("Connect"),"data-testid":"postConnectButton","size-preset":o.OzContainedButtonSizePreset.H40px}})],1),e._v(" "),t("svg",{staticClass:"popup-bubble-anchor-tip z-10",attrs:{width:"55",height:"16",viewBox:"0 0 55 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M0.00219655 0C6.36739 0 12.4719 2.52856 16.9727 7.02944L24.1939 14.2506C25.756 15.8127 28.2887 15.8127 29.8508 14.2506L37.072 7.02943C41.5729 2.52856 47.6774 -1.32551e-06 54.0426 0C54.0996 1.18735e-08 -0.398293 0 0.00219655 0Z",fill:o.tipColor}})])])}),[],!1,null,null,null).exports;function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function be(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function me(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?be(Object(o),!0).forEach((function(t){ve(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):be(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function ve(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=pe(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var he={components:{SurfacePostBeingShowed:V,SurfaceLazy:re.a,PostConnectionOverlay:ue},mixins:[ee,ae],props:{index:Number,post:{type:Object,default:function(){return{}}},isLast:{type:Boolean,default:!1},putAttachmentOnTop:{type:Boolean,default:!1},fitHeightToContainer:{type:Boolean,default:!1},verticallyCenterContent:{type:Boolean,default:!1},xShadow:{type:Boolean,default:!0},postReactionIds:{type:Array,default:function(){return[]}},postCommentIds:{type:Array,default:function(){return[]}},lazyRender:{type:Boolean,default:!1},minPostHeight:{type:Number,default:0},minPostWidth:{type:Number,default:0}},data:function(){return{label:""}},computed:me(me(me(me(me(me(me({},Object(X.d)(["user","isMousable","canPostMessage"])),Object(F.f)(a.a,["postUnderActionCid","postBeingTransferredCid","postBeingCopiedCid"])),Object(F.f)(l.a,["postIdBeingReactedTo"])),Object(F.f)(r.a,["connections","postToConnectFromId"])),Object(X.c)(["canIModerate","canIWrite","format","xAuthor","xNewComposerModalPanel","isStream","isApp"])),Object(F.f)(i.a,["postWithLocationBeingEditedCid"])),{},{isBeingActedUpon:function(){return this.postBeingTransferredCid===this.post.cid||this.postBeingCopiedCid===this.post.cid||this.postToConnectFromId===this.post.id||this.postWithLocationBeingEditedCid===this.post.cid},isBeingReacted:function(){return this.postIdBeingReactedTo===this.post.id},isAppActingOnPost:function(){return this.isApp&&this.canPostMessage&&!!this.postUnderActionCid&&this.post.id===this.postUnderActionCid},wasWrittenByCurrentUser:function(){return!!this.user.id&&this.post.author_id==this.user.id},isEditableByCurrentUser:function(){return this.canIModerate||this.wasWrittenByCurrentUser&&this.canIWrite},hasAttachment:function(){var e=this.post.attachment;return!!e&&Object(n.j)(e)},xConnect:function(){return!!this.postToConnectFromId&&this.postToConnectFromId!==this.post.id&&!this.areConnected(this.post.id,this.postToConnectFromId)},xConnectAndShowNewOverlay:function(){return this.xConnect&&this.isAppUsing("locationSelectorV2")},styles:function(){var e={};if("free"===this.format){this.isBeingActedUpon||this.isAppActingOnPost||this.isBeingReacted?e["z-index"]=12e3:e["z-index"]=1e4-this.index;var t=this.post.width||256;e.width=t+"px";var o=null!==this.post.top?this.post.top:16*this.index,n=null!==this.post.left?this.post.left:16*this.index;e.top=o+"px",e.left=n+"px"}return e},classes:function(){return{"surface-post":!0,wish:!0,"select-none":!0,"rounded-2xl":this.isStream,"rounded-xl":!this.isStream,"is-animated":this.isBeingActedUpon,pulsate:this.isBeingActedUpon||this.isAppActingOnPost,"wish-editable":this.isEditableByCurrentUser,"wish-mine":this.wasWrittenByCurrentUser,"with-attachment":this.hasAttachment,"with-author":this.xAuthor,"attachment-on-top":this.putAttachmentOnTop,"full-height":this.fitHeightToContainer,"shadow-elevation-1":this.xShadow}}}),watch:{isEditableByCurrentUser:function(e){"free"===this.format&&e?this.initializeResizable(this.isMousable,this.resizedPost):this.destroyResizable()}},mounted:function(){"free"===this.format&&this.isEditableByCurrentUser?(this.initializeResizable(this.isMousable,this.resizedPost),this.initializeDraggable(this.movedPost)):(this.destroyResizable(),this.destroyDraggable()),this.isLast&&this.$emit("last-post-mounted")},methods:me(me({isAppUsing:b.a},Object(X.b)("post",["movedPost","resizedPost"])),{},{areConnected:function(e,t){return this.connections.filter((function(o){return o.from_wish_id===e&&o.to_wish_id===t||o.from_wish_id===t&&o.to_wish_id===e})).length>0},handleConnect:function(e){this.label=e,this.selectToConnect()},selectToConnect:function(){var e=Object(b.a)("locationSelectorV2")?this.label:this.$refs.connectorLabelInput.value;null!=this.postToConnectFromId&&Object(r.a)().completeConnection({postToConnectToId:this.post.id,label:e})}})},fe=(o(1692),o(1693),Object(H.a)(he,(function(){var e=this,t=e._self._c;return e.lazyRender?t("SurfaceLazy",{class:e.classes,style:e.styles,attrs:{"min-height":e.minPostHeight,"min-width":e.minPostWidth,id:"wish-"+(e.post.id||"new"),"data-view-mode":"show","data-post-cid":e.post.cid,"data-pinned":String(!!e.post.pinned_at),"data-rank":e.post.sort_index,"data-index":e.index+1,"data-section-id":e.post.wall_section_id,"data-color":e.post.color}},[[t("SurfacePostBeingShowed",e._b({},"SurfacePostBeingShowed",e.$props,!1)),e._v(" "),e.xConnectAndShowNewOverlay?t("PostConnectionOverlay",{on:{connect:e.handleConnect}}):e.xConnect?t("div",{staticClass:"wish-selection"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.selectToConnect.apply(null,arguments)}}},[t("input",{ref:"connectorLabelInput",attrs:{"aria-label":e.__("Connector label"),maxlength:"50","data-testid":"postConnectionLabelInput",placeholder:e.__("Label (optional)")}}),e._v(" "),t("button",{staticClass:"raised-button",attrs:{type:"submit","data-testid":"postConnectButton"}},[e._v(e._s(e.__("Connect")))])])]):e._e()]],2):t("div",{class:e.classes,style:e.styles,attrs:{id:"wish-"+(e.post.id||"new"),"data-view-mode":"show","data-post-cid":e.post.cid,"data-pinned":String(!!e.post.pinned_at),"data-rank":e.post.sort_index,"data-index":e.index+1,"data-section-id":e.post.wall_section_id,"data-color":e.post.color}},[t("SurfacePostBeingShowed",e._b({on:{focus:function(t){return e.$emit("focus")}}},"SurfacePostBeingShowed",e.$props,!1)),e._v(" "),e.xConnectAndShowNewOverlay?t("PostConnectionOverlay",{on:{connect:e.handleConnect}}):e.xConnect?t("div",{staticClass:"wish-selection"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.selectToConnect.apply(null,arguments)}}},[t("input",{ref:"connectorLabelInput",attrs:{"aria-label":e.__("Connector label"),maxlength:"50","data-testid":"postConnectionLabelInput",placeholder:e.__("Label (optional)")}}),e._v(" "),t("button",{staticClass:"raised-button",attrs:{type:"submit","data-testid":"postConnectButton"}},[e._v(e._s(e.__("Connect")))])])]):e._e()],1)}),[],!1,null,"3e64b023",null));t.a=fe.exports},1650:function(e,t,o){"use strict";var n=o(10),i=o(192),a=o(658),r=o(9),l=o(0);t.a=()=>{const{isUserHostingZoomCollaboration:e}=Object(r.g)(Object(a.useZoomRealtimeStore)()),t=Object(l.ref)(!1),o=Object(l.computed)((()=>!0===e.value&&!e.value));return Object(l.onMounted)((()=>{Object(i.c)().then((e=>{t.value=e})).catch((e=>{Object(n.a)(e)}))})),{isUserInZoomCollaborationMode:t,isZoomCollaborationGuest:o}}},1651:function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));const n=0},1658:function(e,t,o){"use strict";var n=o(0),i=o(114),a=o(167),r=o(451),l=o(15),s=o(228),c=o(93),d=o(14),u=o(224),p=o(25),b=o(301),m=o(52),v=o(34),h=Object(n.defineComponent)({__name:"BeethovenAttachmentMetadataSlope",props:{usageContext:null,darkThemeType:{default:"browser"},isDark:{type:Boolean,default:!1},isWhiteboard:{type:Boolean,default:!1},color:{default:"default"}},setup(e){const t=e,o=Object(n.computed)((()=>"browser"===t.darkThemeType)),i=Object(n.computed)((()=>"custom"===t.darkThemeType&&!t.isDark)),a=Object(n.computed)((()=>"custom"===t.darkThemeType&&t.isDark)),l=Object(n.computed)((()=>t.isWhiteboard?32:25)),s=Object(n.computed)((()=>{switch(t.color){case"red":return"bg-scarlet-200";case"orange":return"bg-canary-200";case"green":return"bg-park-200";case"blue":return"bg-oceanic-200";case"purple":return"bg-grape-200";default:return"bg-light-ui-200"}})),c=Object(n.computed)((()=>{switch(t.color){case"red":return"bg-scarlet-800";case"orange":return"bg-tangerine-800";case"green":return"bg-park-800";case"blue":return"bg-oceanic-800";case"purple":return"bg-grape-800";default:return"bg-dark-ui-200"}})),d=Object(n.computed)((()=>{switch(t.color){case"red":return"dark:bg-scarlet-800";case"orange":return"dark:bg-tangerine-800";case"green":return"dark:bg-park-800";case"blue":return"dark:bg-oceanic-800";case"purple":return"dark:bg-grape-800";default:return"dark:bg-dark-ui-200"}})),u=Object(n.computed)((()=>{switch(t.color){case"red":return"text-scarlet-200";case"orange":return"text-canary-200";case"green":return"text-park-200";case"blue":return"text-oceanic-200";case"purple":return"text-grape-200";default:return"text-light-ui-200"}})),p=Object(n.computed)((()=>{switch(t.color){case"red":return"text-scarlet-800";case"orange":return"text-tangerine-800";case"green":return"text-park-800";case"blue":return"text-oceanic-800";case"purple":return"text-grape-800";default:return"text-dark-ui-200"}})),b=Object(n.computed)((()=>{switch(t.color){case"red":return"dark:text-scarlet-800";case"orange":return"dark:text-tangerine-800";case"green":return"dark:text-park-800";case"blue":return"dark:text-oceanic-800";case"purple":return"dark:text-grape-800";default:return"dark:text-dark-ui-200"}}));return{__sfc:!0,props:t,isBrowserDecidingDarkMode:o,isForcedLight:i,isForcedDark:a,wavySvgSize:l,lightMainBgColorClass:s,darkMainBgColorClass:c,darkBrowserMainBgColorClass:d,lightSlopeColorClass:u,darkSlopeColorClass:p,darkBrowserSlopeColorClass:b,dir:r.a}}}),f=o(13),g=Object(f.a)(h,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("div",{class:["flex","absolute","-bottom-px","ltr:left-0","rtl:right-0"],attrs:{dir:o.dir()}},[t("div",{class:[{flex:!0,"items-center":!0,[o.lightMainBgColorClass]:o.isBrowserDecidingDarkMode||o.isForcedLight,"text-dark-text-100":o.isBrowserDecidingDarkMode||o.isForcedLight,[o.darkBrowserMainBgColorClass]:o.isBrowserDecidingDarkMode,"dark:text-light-text-100":o.isBrowserDecidingDarkMode,[o.darkMainBgColorClass]:o.isForcedDark,"text-light-text-100":o.isForcedDark,"text-body-extra-small":!e.isWhiteboard,"text-whiteboard-body-extra-small":e.isWhiteboard,"h-6":!e.isWhiteboard,"h-8":e.isWhiteboard,"ltr:pl-3":"postModal"===e.usageContext,"ltr:pl-2":"postModal"!==e.usageContext,"rtl:pr-3":"postModal"===e.usageContext,"rtl:pr-2":"postModal"!==e.usageContext,shrink:!0,"min-w-0":!0,"z-10":!0}]},[e._t("default")],2),e._v(" "),t("svg",{class:["scale-100","rtl:scale-x-[-1]","shrink-0","-translate-x-px","rtl:translate-x-px","z-0"],attrs:{width:o.wavySvgSize,height:o.wavySvgSize,viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{class:["fill-current",{[o.lightSlopeColorClass]:o.isBrowserDecidingDarkMode||o.isForcedLight},{[o.darkBrowserSlopeColorClass]:o.isBrowserDecidingDarkMode},{[o.darkSlopeColorClass]:o.isForcedDark}],attrs:{d:"M13 12C9.5 6.67572e-06 1 5.44637e-06 1 5.44637e-06L0 -0.00012207V25H25V24C25 24 16.5 24 13 12Z"}})])])}),[],!1,null,null,null).exports,x=o(40),O=o(109),y=o(525),w=o(9),j=Object(n.defineComponent)({__name:"BeethovenAttachmentPreview",props:{url:null,usageContext:null,postCid:null,width:{default:508},height:{default:void 0},xBorder:{type:Boolean,default:!1},xMetadata:{type:Boolean,default:!0},darkThemeType:{default:"browser"},isDark:{type:Boolean,default:!1},lazyLoading:{type:Boolean,default:!0},backgroundColor:{default:void 0},borderRadiusClass:{default:void 0},xHoverOverlay:{type:Boolean,default:!1},fetchPriority:{default:"auto"},customThumbnailUrl:{default:void 0}},emits:["error","load-data","load-image"],setup(e,{emit:t}){const h=e,f=Object(d.b)((()=>o.e(433).then(o.bind(null,3151)))),j=Object(v.b)(),S=Object(m.a)(),k=Object(b.a)(),C=Object(p.useSurfaceStore)(),{isStream:_,isCanvas:P,isWhiteboard:B}=Object(w.g)(C),{getAttachmentPropsFromDraft:M,updateDraftWishContentAttachmentProps:D}=S,{updateLinkDisplayAttributes:z,getAttachmentPropsFromPost:I}=k,T=Object(n.ref)(null),$=Object(n.ref)(!1),E=Object(n.ref)(!1),A=Object(n.ref)(!1),L=Object(n.ref)(null),R=Object(n.ref)(),W=Object(n.ref)(3e3),F=Object(n.ref)(1500),G=Object(n.computed)((()=>"postModal"===h.usageContext)),H=Object(n.computed)((()=>"postPreview"===h.usageContext?null:G.value?M(h.postCid):I(h.postCid))),U=Object(n.computed)((()=>{var e;return Object(l.a)("surfacePostsAltText")&&null!=T.value&&x.a.isPhoto(T.value)&&null!=(null===(e=H.value)||void 0===e?void 0:e.alternative_text)})),N=Object(n.computed)((()=>!B.value&&Object(s.c)(H.value))),V=Object(n.computed)((()=>{var e;return!N.value&&(E.value||(null===(e=T.value)||void 0===e?void 0:e.is_fallback)||!!L.value&&L.value.startsWith("data:"))})),q=Object(n.ref)(!1),Y=Object(n.computed)((()=>{var e;return(null===(e=T.value)||void 0===e?void 0:e.is_transparent)||!1})),X=Object(n.computed)((()=>{if(h.customThumbnailUrl){if(L.value&&!q.value)return L.value}else if(L.value&&!V.value)return L.value;const e=Object(i.i)(te.value,h.isDark?"dark":"light",h.backgroundColor);return P.value?e:Object(O.a)(e,{width:Z.value})})),Z=Object(n.computed)((()=>_.value?1032:476)),K=Object(n.computed)((()=>!!T.value&&x.a.isVideo(T.value)&&!!T.value.image_aspect_ratio)),J=Object(n.computed)((()=>{var e,t,o;return"youtube"===(null===(t=null===(e=T.value)||void 0===e?void 0:e.provider_name)||void 0===t?void 0:t.toLowerCase())?16/9:(null===(o=T.value)||void 0===o?void 0:o.image_aspect_ratio)||4/3})),Q=Object(n.computed)((()=>!!h.url&&(!!c.d.test(h.url)&&(!T.value||"page"===T.value.content_category&&"padlet"===T.value.content_subcategory&&!T.value.original_image_url)))),ee=Object(n.computed)((()=>!!L.value&&L.value.includes("padlet_preview_1200x630"))),te=Object(n.computed)((()=>Q.value||ee.value?i.b.BrokenPadletLink:T.value?x.a.isAudio(T.value)?i.b.Audio:x.a.isVideo(T.value)?i.b.Video:x.a.isPhoto(T.value)?i.b.Image:x.a.isFile(T.value)?i.b.File:x.a.isExcelSpreadsheet(T.value)?i.b.Spreadsheet:x.a.isPowerpointPresentation(T.value)?i.b.Presentation:x.a.isGoogleDoc(T.value)?i.b.GoogleDocument:x.a.isDocument(T.value)?i.b.TextDocument:(x.a.isPage(T.value),i.b.Link):i.b.BrokenLink)),oe=Object(n.computed)((()=>!!T.value&&(Object(i.s)(T.value)&&A.value))),ne=Object(n.computed)((()=>T.value?Object(i.l)(T.value):"")),ie=Object(n.computed)((()=>T.value?Object(i.k)(T.value):"")),ae=Object(n.computed)((()=>{if(T.value&&!x.a.isPadletWall(T.value)||"postModal"===h.usageContext)return{};const e="rtl"===Object(r.a)()?"borderBottomLeftRadius":"borderBottomRightRadius";return{[e]:`${Math.floor(20*h.width/100)}px`}})),re=()=>{A.value=!0;const e=i.h[te.value];W.value=e.width,F.value=e.height};function le(e){t("error",e),E.value=!0,re()}async function se(){var e,o,n,i,r,l,s,c;const d={dpr:window.devicePixelRatio,locale:"en",width:h.width,height:h.height||void 0};let u;E.value=!1;try{u=await Object(a.a)(h.url,d),null===u&&le(new Error("No data.")),u.error&&le(u.error)}catch(b){le(b)}if(E.value)return;T.value=u;let p={};if(h.customThumbnailUrl){const t=await Object(a.a)(h.customThumbnailUrl);q.value=!!(null===t||void 0===t?void 0:t.is_fallback),p={image_aspect_ratio:null===t||void 0===t?void 0:t.image_aspect_ratio,image_color:null===t||void 0===t?void 0:t.image_color,image_height:null===t||void 0===t?void 0:t.image_height,image_width:null===t||void 0===t?void 0:t.image_width,image_luminance:null===t||void 0===t?void 0:t.image_luminance,image_url:null===t||void 0===t?void 0:t.image_url,is_transparent:null===t||void 0===t?void 0:t.is_transparent},p=Object(y.a)(p,((e,t)=>void 0!==t||null!==t)),z({url:h.url,attributes:Object.assign(Object.assign({},u),p)}),D({cid:h.postCid,url:h.url,attachmentProps:Object.assign(Object.assign({},M(h.postCid)),null===(e=u.metadata)||void 0===e?void 0:e.attachment_props)})}else q.value=!1,z({url:h.url,attributes:u}),D({cid:h.postCid,url:h.url,attachmentProps:null===(o=u.metadata)||void 0===o?void 0:o.attachment_props});(B.value||"tweet"!==(null===(i=null===(n=u.metadata)||void 0===n?void 0:n.attachment_props)||void 0===i?void 0:i.type))&&($.value=!0,t("load-data",u)),L.value=null!==(r=null===p||void 0===p?void 0:p.image_url)&&void 0!==r?r:u.image_url,R.value=null!==(l=null===p||void 0===p?void 0:p.image_color)&&void 0!==l?l:u.image_color,W.value=null!==(s=null===p||void 0===p?void 0:p.image_width)&&void 0!==s?s:u.image_width,F.value=null!==(c=null===p||void 0===p?void 0:p.image_height)&&void 0!==c?c:u.image_height,h.customThumbnailUrl?p.is_fallback&&re():V.value&&re()}return Object(n.watch)([()=>h.width,()=>h.url,()=>h.customThumbnailUrl],se),Object(n.onMounted)((()=>{N.value?($.value=!0,t("load-data",{url:h.url,provider_name:"Twitter",content_category:"page",content_subcategory:"html",image_color:""})):se()})),{__sfc:!0,props:h,emit:t,SurfaceAttachmentTweet:f,windowSizeStore:j,surfaceDraftsStore:S,surfaceAttachmentsStore:k,surfaceStore:C,isStream:_,isCanvas:P,isWhiteboard:B,getAttachmentPropsFromDraft:M,updateDraftWishContentAttachmentProps:D,updateLinkDisplayAttributes:z,getAttachmentPropsFromPost:I,link:T,isLoaded:$,isError:E,isImageLoaded:A,imageUrl:L,imageColor:R,thumbnailWidth:W,thumbnailHeight:F,isUsingInPostModal:G,attachmentProps:H,xAlternativeText:U,isTweet:N,isOriginalAttachmentFallback:V,isCustomThumbnailFallback:q,isPreviewImageTransparent:Y,previewImageSrc:X,fallbackWidth:Z,isCroppingVideoPreview:K,videoCropRatio:J,isBrokenPadletLink:Q,isFallbackPeekLink:ee,fallbackAttachmentType:te,hasMetadata:oe,metadataText:ne,extraMetadataText:ie,padletAttachmentBottomBorderRadiusStyle:ae,useSizeDataForFallbackImage:re,handleBeethovenError:le,getBeethovenAttributes:se,handleImageLoaded:function(){A.value=!0,t("load-image")},dir:r.a,ImageThumbnail:u.a,BeethovenAttachmentMetadataSlope:g}}}),S=Object(f.a)(j,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return o.isTweet&&o.attachmentProps?t(o.SurfaceAttachmentTweet,{staticClass:"w-full",attrs:{"attachment-props":o.attachmentProps,"usage-context":e.usageContext,width:e.width,color:e.backgroundColor,"dark-mode":e.isDark,"is-stream":o.isStream,"lazy-loading":e.lazyLoading,"is-whiteboard":o.isWhiteboard,"use-short-date-format":o.windowSizeStore.isSmallerThanTabletPortrait},on:{"image-loaded":o.handleImageLoaded}}):t("div",{class:["relative","overflow-hidden",e.borderRadiusClass]},[o.isLoaded||o.isError?t(o.ImageThumbnail,{key:o.previewImageSrc,class:["max-w-full",e.borderRadiusClass,{"border border-solid":e.xBorder,"border-attachment-preview-border-light ":e.xBorder&&("browser"==e.darkThemeType||!e.isDark),"dark:border-attachment-preview-border-dark":e.xBorder&&"browser"==e.darkThemeType,"border-attachment-preview-border-dark":e.xBorder&&"custom"===e.darkThemeType&&e.isDark,hidden:o.isUsingInPostModal&&!o.isImageLoaded}],style:{...o.padletAttachmentBottomBorderRadiusStyle},attrs:{alt:o.xAlternativeText&&o.attachmentProps?o.attachmentProps.alternative_text:"",width:e.width-(e.xBorder?2:0),src:o.previewImageSrc,"original-image-width":o.thumbnailWidth-(e.xBorder?2:0),"original-image-height":o.thumbnailHeight-(e.xBorder?2:0),"aspect-ratio":o.isCroppingVideoPreview?o.videoCropRatio:void 0,"lazy-loading":e.lazyLoading,"placeholder-color":"transparent","placeholder-color-value":o.isPreviewImageTransparent?void 0:o.imageColor,"fetch-priority":e.fetchPriority},on:{load:o.handleImageLoaded,error:o.handleBeethovenError}}):e._e(),e._v(" "),e.xHoverOverlay?t("div",{class:{"absolute inset-0 opacity-0 hover-hover:hover:opacity-100 transition-opacity duration-250":!0,"bg-attachment-overlay-light":!e.isDark,"bg-attachment-overlay-dark":e.isDark}}):e._e(),e._v(" "),e._t("adornment"),e._v(" "),e.xMetadata&&o.hasMetadata?t(o.BeethovenAttachmentMetadataSlope,{staticClass:"max-w-[calc(100%-2.5rem)]",attrs:{color:e.backgroundColor,"dark-theme-type":e.darkThemeType,"is-dark":e.isDark,title:o.metadataText,"usage-context":e.usageContext,"is-whiteboard":o.isWhiteboard}},[t("div",{staticClass:"truncate font-sans flex flex-row",attrs:{dir:o.dir()}},[t("span",{staticClass:"truncate"},[e._v(e._s(o.metadataText))]),e._v(" "),o.extraMetadataText?[t("span",{class:{"text-light-text-300":e.isDark,"text-dark-text-300":!e.isDark,"px-1":!0}},[e._v(" \u2022 ")]),e._v(" "),t("span",[e._v(e._s(o.extraMetadataText))])]:e._e()],2)]):e._e()],2)}),[],!1,null,null,null);t.a=S.exports},1668:function(e,t,o){"use strict";o.d(t,"a",(function(){return l})),o.d(t,"b",(function(){return s})),o.d(t,"c",(function(){return a})),o.d(t,"d",(function(){return r})),o.d(t,"e",(function(){return x})),o.d(t,"f",(function(){return f})),o.d(t,"g",(function(){return h})),o.d(t,"h",(function(){return S})),o.d(t,"i",(function(){return j})),o.d(t,"j",(function(){return w})),o.d(t,"k",(function(){return g})),o.d(t,"l",(function(){return y})),o.d(t,"m",(function(){return O}));var n,i=o(2);const a="wall-container",r="wish-list",l=".no-drag, input, textarea",s=".group-posts",c=i.b.visualViewport.height,d=i.b.visualViewport.width,u=d<1024,p=(e,t)=>{const o="vertical"===e?c:d;return Math.min(t,o/6)},b=(e,t)=>{const o="vertical"===e?c:d;return Math.min(t,o/20)},m={default:{animation:0,invertSwap:!0,invertedSwapThreshold:u?.2:.5,forceFallback:!0,fallbackOnBody:!0,fallbackTolerance:5,delay:150,delayOnTouchOnly:!0,scroll:!0,scrollSensitivity:p("horizontal",150),scrollSpeed:b("horizontal",30)},stream:{scrollSensitivity:p("vertical",150),scrollSpeed:b("vertical",25)},grid:{scrollSensitivity:p("vertical",50),scrollSpeed:b("vertical",20)},map:{animation:u?0:150,invertSwap:!1,swapThreshold:u?.5:.75,scrollSensitivity:u?p("horizontal",100):p("vertical",150),scrollSpeed:u?b("horizontal",20):b("vertical",25)}},v={default:Object.assign(Object.assign({},m.default),{scrollSensitivity:p("vertical",150),scrollSpeed:b("vertical",25)}),grid:{scrollSensitivity:p("horizontal",150),scrollSpeed:b("horizontal",30)},map:Object.assign(Object.assign({},null!==(n=m.map)&&void 0!==n?n:{}),{animation:0,invertSwap:!0,invertedSwapThreshold:u?.2:.5})},h=(e,t)=>{var o;const n="post"===e?m:v;return Object.assign(Object.assign({},n.default),null!==(o=n[t])&&void 0!==o?o:{})},f=e=>e?"#FEC006":"#9466E8",g=e=>{requestAnimationFrame((()=>{const t=document.querySelector(".sortable-fallback");null!=t&&t.setAttribute("dir",e)}))},x=(e,t)=>{var o;const n=e.item,i=Math.max(null!==(o=e.oldIndex)&&void 0!==o?o:0,0),a=e.from.insertBefore(n.cloneNode(!0),e.from.children[i]),r=a.querySelector(t);return a.classList.add("sortable-persistent-clone"),a.classList.remove("sortable-indicator-line"),{cloneWrapperElement:a,cloneTargetElement:r}},O=e=>{var t;return{groupId:null!==(t=e.item.dataset.id)&&void 0!==t?t:""}},y=e=>{var t,o,n,i;const a=null!==(t=e.item.dataset.cid)&&void 0!==t?t:"",r=parseInt(null!==(o=e.item.dataset.id)&&void 0!==o?o:""),l=parseInt(null!==(n=e.to.dataset.id)&&void 0!==n?n:""),s=Number.isNaN(l)?null!==(i=e.to.dataset.id)&&void 0!==i?i:"":l;return""===a||Number.isNaN(r)||""===s?{}:{postCid:a,postId:r,groupId:s}};function w(e){return e.classList.contains(s.slice(1))}function j(e){const t=e.to,o=e.related;return(t.querySelector(".wish-wrapper:first-child")===o||t.querySelector("[id^=wish-preview-]:first-child")===o)&&!1===e.willInsertAfter}function S(e){const t=e.to,o=e.related;return(t.querySelector(".wish-wrapper:last-child")===o||t.querySelector("[id^=wish-preview-]:last-child")===o)&&!0===e.willInsertAfter}},1669:function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));var n=o(1600);function i(){let e=null;const t=()=>{null===e||void 0===e||e.remove(),e=null};return{forceChangeCursor:o=>{t(),e=Object(n.a)(`\n        body * {\n          cursor: ${o} !important;\n        }\n      `)},resetCursor:t}}},1674:function(e,t,o){"use strict";var n=o(0),i=o(22),a=o(138),r=o(114),l=o(16),s=o(15),c=o(1),d=o(8),u=o(228),p=o(147),b=o(100),m=o(37),v=o(14),h=o(1651),f=o(192),g=o(140),x=o(55),O=o(25),y=o(301),w=o(52),j=o(356),S=o(107),k=o(770),C=o(88),_=o(34),P=o(483),B=o(906),M=o(1650),D=o(905),z=o(40),I=o(83),T=o(105),$=o(9),E=o(73),A=o(1658),L=o(377),R=Object(n.defineComponent)({__name:"SurfacePostAttachment",props:{post:null,displayedPostWidth:null,displayedPostHeight:null,isEditableByCurrentUser:{type:Boolean},overrideColorScheme:null},emits:["toggle-embed-control","focus-attachment","blur-attachment","data-loaded"],setup(e,{expose:t,emit:R}){const W=e,F=D.a,G=Object(v.b)((()=>o.e(530).then(o.bind(null,3147)))),H=Object(v.b)((()=>o.e(542).then(o.bind(null,928)))),U=Object(v.b)((()=>o.e(553).then(o.bind(null,3148)))),N=Object(v.b)((()=>o.e(32).then(o.bind(null,3047)))),V=Object(_.b)(),q=Object(k.a)(),Y=Object(O.useSurfaceStore)(),X=Object(j.a)(),Z=Object(y.a)(),K=Object(w.a)(),J=Object(x.a)(),Q=Object(g.a)(),ee=Object(S.e)(),te=Object(C.b)(),{isStream:oe,isWhiteboard:ne,blockedContentProviders:ie}=Object($.g)(Y),{shouldDisableDraggingPost:ae}=Object($.g)(q),{isSmallerThanDesktop:re}=Object($.g)(V),{currentlyPlayingPostCid:le}=Object($.g)(X),{isAPostDragging:se}=Object($.g)(q),ce=Object(n.ref)(),de=Object(n.ref)(),ue=Object(n.ref)(),pe=Object(n.ref)(!1),be=Object(n.ref)(!1),me=Object(n.ref)(!1),ve=Object(n.ref)(null),he=Object(n.ref)(!1),fe=Object(n.ref)(!1),ge=Object(n.ref)(null),xe=Object(n.ref)(null),Oe=Object(n.ref)(0),ye=Object(n.ref)(0),we=Object(n.ref)("rgb(0,0,0)"),je=Object(n.ref)(""),Se=Object(n.ref)(!1),ke=Object(n.ref)(""),Ce=Object(n.ref)(null),_e=Object(n.ref)(),Pe=Object(n.ref)(null),Be=Object(n.ref)(null),Me=Object(n.computed)((()=>je.value.toLowerCase())),De=Object(n.computed)((()=>{var e,t;return Object(u.c)(null===(t=null===(e=ve.value)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.attachment_props)?"link":l.a.zoomApp&&"padlet"===xe.value?"padlet":Object(r.r)(ge.value,je.value)?"link":!ne.value||"video"!==ge.value&&"audio"!==ge.value?"audio"!==ge.value||"padlet drive"===Me.value||oe.value?"tiktok"===Me.value?"expand":"audio"===ge.value||!Object(s.a)("playVideoInExpanded")&&"video"===ge.value?"play":Se.value&&"file"===ge.value?"download":"photo"===ge.value||Object(s.a)("playVideoInExpanded")&&"video"===ge.value?"expand":"page"===ge.value?"link":ke.value&&"padlet"!==xe.value?"expand":"link":"expand":"play"})),ze=(e,t)=>{var o,n,i,a;let r="",l=!0;return Object(I.a)(e.subject)?Object(I.a)(null===(n=null===(o=e.wish_content)||void 0===o?void 0:o.attachment_props)||void 0===n?void 0:n.alternative_text)?Object(I.a)(e.attachment_caption)?(""===r&&null!=t&&(r=Object(P.a)({attachmentCaption:e.attachment_caption,attachmentDisplayAttributes:t})),{description:r,isDescriptionGeneratedFromAttachment:l}):(r=e.attachment_caption,{description:r,isDescriptionGeneratedFromAttachment:l}):(r=null===(a=null===(i=e.wish_content)||void 0===i?void 0:i.attachment_props)||void 0===a?void 0:a.alternative_text,{description:r,isDescriptionGeneratedFromAttachment:l}):(l=!1,r=e.subject,{description:r,isDescriptionGeneratedFromAttachment:l})},Ie=({post:e,interaction:t,attachmentDisplayAttributes:o})=>{var n,i;if("link"===t)return"";if("download"===t)return Object(c.b)("Download %{fileDescription}",{fileDescription:`${null!==(n=null===o||void 0===o?void 0:o.content_subcategory)&&void 0!==n?n:""} ${null!==(i=null===o||void 0===o?void 0:o.content_category)&&void 0!==i?i:""}`.trim()});const{description:a,isDescriptionGeneratedFromAttachment:r}=ze(e,o);return r?Object(c.b)("Open the post with attachment of %{description} in expanded view",{description:a}):Object(c.b)("Open the post %{description} in expanded view",{description:a})},Te=Object(n.computed)((()=>Ie({post:W.post,interaction:De.value,attachmentDisplayAttributes:ve.value}))),$e=Object(n.computed)((()=>{var e;return!be.value&&!!ve.value||!ne.value&&Object(u.c)(null===(e=W.post.wish_content)||void 0===e?void 0:e.attachment_props)})),Ee=Object(n.computed)((()=>{var e,t;return null===(t=null===(e=W.post.wish_content)||void 0===e?void 0:e.attachment_props)||void 0===t?void 0:t.custom_thumbnail_url})),Ae=Object(n.computed)((()=>{var e,t,o,n,i;return Object(u.c)(null===(e=W.post.wish_content)||void 0===e?void 0:e.attachment_props)?ne.value?null===(t=ve.value)||void 0===t?void 0:t.url:null===(o=W.post.wish_content)||void 0===o?void 0:o.attachment_props.url:(null===(n=ve.value)||void 0===n?void 0:n.url)?null===(i=ve.value)||void 0===i?void 0:i.url:be.value?We.value:void 0})),Le=Object(n.computed)((()=>Ae.value?Object(r.g)(Ae.value):"")),Re=Object(n.computed)((()=>{var e;return"expand"===De.value&&W.post.permalink?Y.isSectionBreakout&&W.post.id?Object(d.c)(Object(b.d)(Y.namespace,null!==(e=te.sectionBreakoutIdentifier)&&void 0!==e?e:"",W.post.id)):W.post.permalink:Object(r.t)(ve.value,Ae.value)})),We=Object(n.computed)((()=>W.post.attachment)),Fe=Object(n.computed)((()=>!!He.value)),Ge=Object(n.computed)((()=>Object(r.r)(ge.value,je.value)?null:"video"===ge.value||"audio"===ge.value?"play":null)),He=Object(n.computed)((()=>Object(P.a)({attachmentCaption:W.post.attachment_caption,attachmentDisplayAttributes:ve.value}))),Ue=Object(L.usePreferredReducedMotion)(),Ne=Object(n.computed)((()=>"gif"===xe.value)),Ve=Object(n.ref)(!1);Object(n.watch)(Ne,(()=>{Ne.value&&(Ve.value="reduce"===Ue.value)}),{immediate:!0});const qe=Object(n.computed)((()=>{var e;return null!==(e=W.overrideColorScheme)&&void 0!==e?e:Y.colorScheme})),Ye=Object(n.computed)((()=>"light"===qe.value)),Xe=Object(n.computed)((()=>ee.getDisplayedColorForPost(W.post))),Ze=Object(n.computed)((()=>Object(p.k)({postColor:Xe.value,isLightColorScheme:Ye.value}))),Ke=Object(n.computed)((()=>we.value?Object(p.p)(we.value):Ze.value)),Je=Object(n.computed)((()=>{const e=Ke.value;return`rgb(${e.r},${e.g},${e.b})`})),Qe=Object(n.computed)((()=>{if($e.value)return"";switch(Xe.value){case"red":return Ye.value?"animate-pulse-bg-color-slow pulse-bg-from-scarlet-100 pulse-bg-to-scarlet-400":"animate-pulse-bg-color-slow pulse-bg-from-scarlet-900 pulse-bg-to-scarlet-700";case"orange":return Ye.value?"animate-pulse-bg-color-slow pulse-bg-from-canary-100 pulse-bg-to-canary-400":"animate-pulse-bg-color-slow pulse-bg-from-tangerine-900 pulse-bg-to-tangerine-700";case"green":return Ye.value?"animate-pulse-bg-color-slow pulse-bg-from-park-100 pulse-bg-to-park-400":"animate-pulse-bg-color-slow pulse-bg-from-park-900 pulse-bg-to-park-700";case"blue":return Ye.value?"animate-pulse-bg-color-slow pulse-bg-from-oceanic-100 pulse-bg-to-oceanic-400":"animate-pulse-bg-color-slow pulse-bg-from-oceanic-900 pulse-bg-to-oceanic-700";case"purple":return Ye.value?"animate-pulse-bg-color-slow pulse-bg-from-grape-100 pulse-bg-to-grape-400":"animate-pulse-bg-color-slow pulse-bg-from-grape-900 pulse-bg-to-grape-700";default:return Ye.value?"animate-pulse-bg-color-slow pulse-bg-from-light-ui-100 pulse-bg-to-light-ui-400":"animate-pulse-bg-color-slow pulse-bg-from-dark-ui-100 pulse-bg-to-dark-ui-400"}})),et=Object(n.computed)((()=>ne.value?W.displayedPostHeight-2*h.a:ye.value||tt.value/Oe.value)),tt=Object(n.computed)((()=>oe.value?W.displayedPostWidth-24:ne.value?W.displayedPostWidth-2*h.a:W.displayedPostWidth-16)),ot=Object(n.computed)((()=>"padlet"===xe.value&&"padlet"!==je.value)),nt=Object(n.computed)((()=>X.isPostPlayingMedia(W.post.cid)));Object(n.watch)(We,(()=>{be.value=!1,pe.value=!1,ve.value=null,he.value=!1,fe.value=!1})),Object(n.watch)(Ze,((e,t)=>{!Object(T.a)(e,t)&&nt.value&&ve.value&&z.a.isAudio(ve.value)&&it()})),Object(n.watch)(nt,(()=>{R("toggle-embed-control",{xEmbed:nt.value,isDownloadable:Se.value,downloadUrl:Le.value})})),Object(n.watch)(le,(e=>{nt.value&&e&&W.post.cid!==e&&st()}));const it=()=>{X.setCurrentlyPlayingMedia({type:"post",id:W.post.cid}),me.value||(Be.value=ke.value,Object(n.nextTick)((()=>{var e;const t=null===(e=de.value)||void 0===e?void 0:e.firstChild;if(t&&"iframe"===t.tagName.toLowerCase()){const e=t;let o=tt.value,n=et.value;if("youtube"===Me.value){const t=e.getAttribute("width"),i=e.getAttribute("height"),a=Number(t)/Number(i);Number.isNaN(a)||(o=tt.value,n=Math.round(tt.value/a))}e.setAttribute("width",o+"px"),e.setAttribute("height",n+"px"),e.style.background=we.value;const i=e.getAttribute("src");let a=Object(m.c)(i,"autoplay=1");if(ve.value&&z.a.isAudio(ve.value)){const e=Object(r.i)(r.b.Audio,qe.value,Xe.value);a=Object(m.c)(a,`poster_url=${e}`)}"padlet drive"===Me.value&&e.setAttribute("allow","autoplay"),"youtube"===Me.value&&(a=Object(m.c)(a,"rel=0")),e.setAttribute("src",a),Be.value=e.outerHTML}})))},{isZoomCollaborationGuest:at}=Object(M.a)(),rt=e=>{var t,o;if(null===(o=null===(t=ce.value)||void 0===t?void 0:t.closest(".surface-post"))||void 0===o?void 0:o.classList.contains("noclick"))e.preventDefault();else if(l.a.mac&&e.metaKey||!l.a.mac&&e.ctrlKey)Object(s.a)("linkSafetyModal")&&(e.preventDefault(),Object(B.a)(Re.value,W.post.author_hashid));else{if(l.a.zoomApp&&"link"===De.value)return e.preventDefault(),void Object(f.g)(Re.value);if(l.a.zoomApp&&"padlet"===De.value)return e.preventDefault(),void(at.value&&Object(m.e)(Re.value)===m.a?Object(f.g)(Re.value):Object(d.y)(Re.value));if("play"===De.value)return it(),"video"===ge.value&&Object(i.a)("Attachment","Played video inline",null,null,{wishId:W.post.id}),"audio"===ge.value&&Object(i.a)("Attachment","Played audio inline",null,null,{wishId:W.post.id}),void e.preventDefault();if(!l.a.app||!Object(a.a)("postMessage")||Object(a.a)("nativeExpandedPostV1"))return"expand"===De.value?(Q.expandPost({postCid:W.post.cid,xTextPanel:!re.value}),e.preventDefault(),void Object(i.a)("Surface","Expanded post",null,null,{wishId:W.post.id})):"link"===De.value&&Object(s.a)("linkSafetyModal")?(e.preventDefault(),void Object(B.a)(Re.value,W.post.author_hashid)):void(l.a.app&&Object(a.a)("postMessage")&&lt());lt()}},lt=()=>{var e,t;let o="external";"padlet"===xe.value&&ot.value?o="padlet":"photo"===ge.value||"file"===ge.value?o="internal_mediaplayer":"page"!==ge.value&&"document"!==ge.value||(o="internal_webview"),Ae.value&&J.openLink({url:Ae.value,linkType:o,contentCategory:null!==(e=ge.value)&&void 0!==e?e:void 0,contentSubcategory:null!==(t=xe.value)&&void 0!==t?t:void 0})},st=()=>{X.unsetCurrentlyPlayingMedia()},ct=()=>{var e,t;Ae.value&&(l.a.app?J.openLink({url:Ae.value,linkType:"external",contentCategory:null!==(e=ge.value)&&void 0!==e?e:void 0,contentSubcategory:null!==(t=xe.value)&&void 0!==t?t:void 0}):Object(d.y)(Ae.value,{target:"_blank"}))},dt=e=>{switch(e){case"back-to-preview":st();break;case"open-in-new":st(),ct()}};return t({postMessage:dt,embedWrapper:de,play:rt,interaction:De}),{__sfc:!0,vEmitClickOnTouch:F,BeethovenAttachmentCaption:G,SurfaceAttachmentActionButton:H,SurfacePostAttachmentDisplayButton:U,SurfaceAttachmentContentBlocked:N,props:W,emit:R,windowSizeStore:V,surfacePostsDragAndDropStore:q,surfaceStore:Y,surfaceMediaPlayerStore:X,surfaceAttachmentsStore:Z,surfaceDraftsStore:K,nativeAppStore:J,expandedPostStore:Q,surfacePostPropertiesStore:ee,surfaceShareLinksStore:te,isStream:oe,isWhiteboard:ne,blockedContentProviders:ie,shouldDisableDraggingPost:ae,isSmallerThanDesktop:re,currentlyPlayingPostCid:le,isAPostDragging:se,rootEl:ce,embedWrapper:de,attachmentCaptionEl:ue,isImageLoaded:pe,isError:be,hasBlockedContent:me,linkData:ve,isFallback:he,showMeta:fe,contentCategory:ge,contentSubcategory:xe,attachmentAspectRatio:Oe,attachmentHeight:ye,attachmentColor:we,providerName:je,isDownloadable:Se,attachmentEmbedCode:ke,errorText:Ce,attachmentLuminance:_e,downloadFileName:Pe,embedHtml:Be,lowercaseProviderName:Me,interaction:De,getPostAriaDetails:ze,getPostAttachmentAnchorAriaLabel:Ie,ariaLabel:Te,isDataLoaded:$e,customThumbnailUrl:Ee,urlForDisplay:Ae,downloadUrl:Le,urlForOpening:Re,url:We,hasCaption:Fe,buttonIcon:Ge,attachmentCaption:He,prefersReducedMotion:Ue,isGif:Ne,isGifPaused:Ve,handleGifButtonClick:()=>{Ve.value=!Ve.value},colorScheme:qe,isLightColorScheme:Ye,displayedPostColor:Xe,backgroundColor:Ze,imageBackgroundColor:Ke,imageBackgroundColorString:Je,placeholderColorClass:Qe,realAttachmentHeight:et,attachmentWidth:tt,isPadletAttachment:ot,showEmbed:nt,handleDataLoaded:e=>{Ce.value=null,be.value=!1,me.value=Object(r.p)(e,ie.value),ve.value=e,he.value=e.is_fallback,ge.value=e.content_category,xe.value=e.content_subcategory,ke.value=e.embed_code,Oe.value=e.image_aspect_ratio,ye.value=e.image_height,we.value=e.image_color,_e.value=e.image_luminance,Se.value=e.is_downloadable&&!l.a.mobile,fe.value=e.show_meta,je.value=Object(r.n)(e.provider_name),"file"===ge.value&&(Pe.value=W.post.subject||null),R("data-loaded",e)},handleImageLoaded:()=>{pe.value=!0,We.value&&Z.setSurfacePreviewImageLoaded({url:We.value})},handleBeethovenError:e=>{be.value=!0,Ce.value=e},embedInline:it,isZoomCollaborationGuest:at,play:rt,playInNativeApp:lt,openPostModal:()=>{W.isEditableByCurrentUser&&K.startEditingDraft(W.post.cid)},backToPreview:st,openInNew:ct,postMessage:dt,__:c.b,OzIconButton:E.d,OzIconButtonColorScheme:E.a,OzIconButtonSizePreset:E.c,BeethovenAttachmentPreview:A.a}}}),W=o(13),F=Object(W.a)(R,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("div",{ref:"rootEl",staticClass:"relative group"},[!o.isImageLoaded||o.isGifPaused?t("div",{class:["rounded-lg",o.placeholderColorClass,"flex-1"],style:{width:`${o.attachmentWidth}px`,height:`${o.isDataLoaded?o.attachmentHeight:o.attachmentWidth/2}px`,backgroundColor:o.isDataLoaded?o.imageBackgroundColorString:void 0,willChange:"background-color"}}):e._e(),e._v(" "),t("a",{directives:[{name:"show",rawName:"v-show",value:!o.showEmbed&&o.isImageLoaded,expression:"!showEmbed && isImageLoaded"},{name:"emit-click-on-touch",rawName:"v-emit-click-on-touch"}],staticClass:"relative flex flex-1 group",attrs:{"data-testid":"showAttachmentPreview","data-testid-is-loaded":o.isDataLoaded,href:o.urlForOpening,"aria-label":o.ariaLabel,target:"_blank",rel:"noopener nofollow ugc",draggable:!o.shouldDisableDraggingPost},on:{focus:function(e){return o.emit("focus-attachment")},blur:function(e){return o.emit("blur-attachment")},click:o.play,mousedown:function(e){e.preventDefault()}}},[o.isGifPaused?e._e():t(o.BeethovenAttachmentPreview,{key:o.url,class:["flex-auto w-full",o.placeholderColorClass,"group-focus-visible:ring-2 rounded-lg",{"group-focus-visible:ring-canary border-dark-text-100":"dark"===o.colorScheme,"group-focus-visible:ring-grape border-light-text-100":"light"===o.colorScheme}],style:{willChange:"background-color"},attrs:{"border-radius-class":"rounded-lg",url:o.url,width:o.attachmentWidth,"x-border":!1,"dark-theme-type":"custom","is-dark":"dark"===o.colorScheme,"background-color":o.displayedPostColor,"usage-context":"postView","post-cid":e.post.cid,"lazy-loading":!1,"fetch-priority":"high",draggable:"false","x-hover-overlay":!o.isAPostDragging,"custom-thumbnail-url":o.customThumbnailUrl},on:{"load-data":o.handleDataLoaded,"load-image":o.handleImageLoaded,error:o.handleBeethovenError},scopedSlots:e._u([{key:"adornment",fn:function(){return[e._t("adornment")]},proxy:!0}],null,!0)}),e._v(" "),o.buttonIcon&&o.isWhiteboard?t(o.SurfaceAttachmentActionButton,{attrs:{"icon-name":o.buttonIcon,title:"play"===o.buttonIcon?o.__("Play attachment"):o.__("Download attachment"),"aria-label":"play"===o.buttonIcon?o.__("Play attachment"):o.__("Download attachment"),"post-color":o.displayedPostColor,"color-scheme":o.colorScheme,size:o.isWhiteboard?"64px":"32px"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),o.play.apply(null,arguments)}}}):o.buttonIcon?t(o.SurfacePostAttachmentDisplayButton,{attrs:{post:e.post,color:o.displayedPostColor,"icon-name":o.buttonIcon}}):e._e()],1),e._v(" "),o.isGif?t(o.OzIconButton,{class:["absolute bottom-1 end-1 z-10",o.isGifPaused?"opacity-100":"opacity-0","focus:opacity-100","transition-opacity","group-hover:opacity-100"],attrs:{"dark-mode":"dark"===o.attachmentLuminance,label:o.isGifPaused?o.__("Play GIF"):o.__("Pause GIF"),"color-scheme":o.OzIconButtonColorScheme.SecondaryClear,"size-preset":o.OzIconButtonSizePreset.H24px,"icon-name":o.isGifPaused?"play":"pause"},on:{click:o.handleGifButtonClick}}):e._e(),e._v(" "),o.showEmbed?t("div",[o.hasBlockedContent?t("div",{staticClass:"flex overflow-hidden rounded-lg pointer-events-auto surface-post-attachment-inline-embed"},[t(o.SurfaceAttachmentContentBlocked,{style:{width:`${o.attachmentWidth}px`,height:`${o.attachmentHeight}px`},attrs:{"provider-name":o.lowercaseProviderName}})],1):t("div",{ref:"embedWrapper",staticClass:"flex overflow-hidden rounded-lg pointer-events-auto surface-post-attachment-inline-embed",style:{backgroundColor:o.imageBackgroundColorString},domProps:{innerHTML:e._s(o.embedHtml)}})]):e._e(),e._v(" "),!o.isWhiteboard&&o.hasCaption?t(o.BeethovenAttachmentCaption,{ref:"attachmentCaptionEl",class:{"px-1":!0,"mt-2":o.isStream,"mt-1.5":!o.isStream},attrs:{"x-placeholder":e.isEditableByCurrentUser,"attachment-caption":o.attachmentCaption,"dark-theme-type":"custom","is-dark":"dark"===o.colorScheme,"usage-context":"postView"},on:{"edit-start":o.openPostModal}}):e._e(),e._v(" "),o.isError?t("div",{class:{"mx-1 mt-1.5 mb-0.5":!0,"text-body-extra-small":!o.isWhiteboard,"text-whiteboard-body-extra-small":o.isWhiteboard,italic:!0,"text-dark-text-200":"light"===o.colorScheme,"text-light-text-200":"dark"===o.colorScheme},attrs:{"data-testid":"attachmentPreviewErrorMessage"}},[e._v("\n    "+e._s(o.__("Sorry, we could not get a preview for this attachment."))+"\n  ")]):e._e()],1)}),[],!1,null,null,null);t.a=F.exports},1675:function(e,t,o){"use strict";var n=o(0),i=o(1607),a=Object(n.defineComponent)({__name:"multiline_input",props:{value:{default:""},placeholder:{default:""},dir:{default:"auto"},allowNewlines:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},maxLength:{default:void 0},darkMode:{type:[Boolean,String],default:"auto"}},emits:["click","input","enter","blur","keyup","paste","arrow-down-on-last-line","arrow-up-on-first-line","escape","focus"],setup(e,{expose:t,emit:o}){const a=e,r=Object(n.ref)(),l=Object(n.ref)(a.value),s=Object(n.ref)(null),c=Object(n.computed)((()=>s.value?{height:`${s.value}px`}:{}));function d(){s.value=null,Object(n.nextTick)((()=>{void 0!==r.value&&(s.value=r.value.scrollHeight,0===r.value.scrollHeight&&setTimeout((()=>{void 0!==r.value&&(s.value=r.value.scrollHeight)}),0))}))}function u(){if(a.allowNewlines)return;const e=l.value.replace(/\n|\r/g,"");l.value!==e&&(l.value=e)}return Object(n.watch)(l,d),Object(n.watch)((()=>a.value),(()=>{l.value=a.value,u()})),Object(i.a)(r,d),Object(n.onMounted)((()=>{d()})),t({focus:()=>{Object(n.nextTick)((()=>{var e;return null===(e=r.value)||void 0===e?void 0:e.focus()}))},select:()=>{Object(n.nextTick)((()=>{var e;return null===(e=r.value)||void 0===e?void 0:e.select()}))},blur:()=>{var e;null===(e=r.value)||void 0===e||e.blur()}}),{__sfc:!0,props:a,emit:o,inputElement:r,currentValue:l,height:s,style:c,autoResize:d,onInput:function(){u(),o("input",l.value)},onEnter:function(e){e.isComposing||229===e.keyCode||a.allowNewlines||(o("enter",l.value),e.preventDefault())},onArrowDown:function(){const e=r.value;void 0!==e&&e.selectionStart===e.value.length&&o("arrow-down-on-last-line")},onArrowUp:function(){const e=r.value;void 0!==e&&0===e.selectionStart&&o("arrow-up-on-first-line")},removeNewlinesIfDisallowed:u}}}),r=o(13),l=Object(r.a)(a,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("textarea",{directives:[{name:"model",rawName:"v-model",value:o.currentValue,expression:"currentValue"}],ref:"inputElement",class:["w-full border-none bg-transparent resize-none p-0 shadow-none focus:shadow-none no-underline overflow-hidden box-border",{"text-dark-text-100 placeholder:text-dark-text-200":!1===e.darkMode,"text-light-text-100 placeholder:text-light-text-200":!0===e.darkMode,"text-dark-text-100 placeholder:text-dark-text-200 dark:text-light-text-100 dark:placeholder:text-light-text-200":"auto"===e.darkMode}],style:o.style,attrs:{rows:1,placeholder:e.placeholder,maxlength:e.maxLength,dir:e.dir,readonly:e.readonly},domProps:{value:o.currentValue},on:{click:function(t){return e.$emit("click",t)},input:[function(e){e.target.composing||(o.currentValue=e.target.value)},o.onInput],keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:o.onEnter.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"escape",void 0,t.key,void 0)?null:e.$emit("escape")},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:o.onArrowDown.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:o.onArrowUp.apply(null,arguments)}],focus:function(t){return e.$emit("focus")},blur:function(t){return e.$emit("blur",t)},keyup:function(t){return e.$emit("keyup",t)},paste:function(t){return t.stopPropagation(),e.$emit("paste",t)}}})}),[],!1,null,null,null);t.a=l.exports},1677:function(e,t,o){"use strict";var n=o(62);o.d(t,"a",(function(){return n.a}));o(1817),o(1627)},1689:function(e,t,o){"use strict";o(1633)},1690:function(e,t,o){"use strict";o(1634)},1691:function(e,t,o){(e.exports=o(132)(!1)).push([e.i,".wish-shadow[data-v-3990150c]{box-shadow:0px 1px 1px rgba(0,0,0,0.12)}.wish-bigger-shadow[data-v-3990150c]{box-shadow:0 3px 3px rgba(0,0,0,0.12),0px 2px 2px rgba(0,0,0,0.16)}[data-v-3990150c] .wish-body-content-stream pre{margin-top:0.5rem;margin-bottom:0.5rem;padding-top:0.5rem;padding-bottom:0.5rem;padding-left:0.75rem;padding-right:0.75rem}\n",""])},1692:function(e,t,o){"use strict";o(1635)},1693:function(e,t,o){"use strict";o(1636)},1694:function(e,t,o){},1708:function(e,t,o){"use strict";var n=o(0),i=o(63),a=o(1),r=o(14),l=o(32),s=o(64),c=o(1810),d=o(25),u=o(117),p=o(102),b=o(67),m=o(42),v=o(770),h=o(48),f=o(1723),g=o(9),x=Object(n.defineComponent)({__name:"SurfacePostGroupHeaderSection",props:{section:null,useDefaultBgColor:{type:Boolean}},emits:["long-press","resize","before-unmount"],setup(e,{expose:t,emit:x}){const O=e,y=Object(r.b)((()=>Promise.resolve().then(o.bind(null,1810)))),w=Object(r.b)((()=>Promise.resolve().then(o.bind(null,64)))),j=Object(r.b)((()=>Promise.resolve().then(o.bind(null,56)))),S=Object(m.a)(),k=Object(h.a)(),C=Object(u.a)(),_=Object(p.e)(),{backgroundColor:P,backgroundLuminance:B,colorScheme:M,dir:D,fontId:z,format:I,isGrid:T,isMap:$,isReadOnly:E,skinPrimaryVariantColorAsRGB:A,isSectionBreakout:L,isFrozen:R}=Object(g.g)(Object(d.useSurfaceStore)()),{isDraggingPostInNonManuallySortedWall:W}=Object(g.g)(Object(v.a)()),{canIModerate:F,canIPost:G}=Object(g.g)(Object(b.a)()),{sectionBeingRenamedId:H,canEditSectionNameInline:U,xSectionSpecificButtons:N,sectionUnderActionId:V,sectionUnderActionRightClickCoordinates:q}=Object(g.g)(k),Y=Object(n.computed)((()=>!T.value&&W.value));function X(e,t){if(!_.isDemoPadletPanelDesktop&&e){V.value=e;const o=null!=(null===t||void 0===t?void 0:t.pageX)&&null!=(null===t||void 0===t?void 0:t.pageY);q.value=o?{x:t.pageX,y:t.pageY}:null}}const Z=Object(n.ref)(null),K=Object(n.ref)(null);function J(){Z.value&&x("resize",Z.value.getBoundingClientRect())}Object(n.watch)(H,(e=>{null!=e&&Object(n.nextTick)((()=>{const t=document.getElementById(`section-title-${e}`);t&&!Object(i.f)(t)&&(null===t||void 0===t||t.scrollIntoView(!0))}))})),Object(n.onBeforeUnmount)((()=>{x("before-unmount")}));const Q=Object(n.computed)((()=>({shouldShow:G.value&&!E.value&&!L.value&&!R.value,icon:"plus_thin",label:Object(a.b)("Add post to this section"),onClick:()=>{$.value?C.startPickingLocation({sectionId:O.section.id}):S.startNewPost({attributes:{wall_section_id:O.section.id}})},id:`section-add-post-button-${O.section.id}`,testId:`${O.section.title}SectionAddPostButton`}))),ee=Object(n.computed)((()=>({shouldShow:!E.value&&!L.value,icon:"dot_3_horizontal",label:Object(a.b)("Open section actions menu"),onClick:()=>X(O.section.id),id:`section-action-menu-button-${O.section.id}`,testId:`${O.section.title}SectionTitleMoreButton`}))),te=Object(n.computed)((()=>[Q.value,ee.value].filter((e=>e.shouldShow))));Object(n.watch)(K,(()=>{J()}));const oe=Object(n.ref)(null);return t({sectionTitleRef:oe}),{__sfc:!0,OzSkewedButton:y,OzPlainButton:w,OzIcon:j,props:O,emit:x,surfacePostsStore:S,surfaceSectionsStore:k,surfaceMapStore:C,surfaceDemoPadletPanelStore:_,backgroundColor:P,backgroundLuminance:B,colorScheme:M,dir:D,fontId:z,format:I,isGrid:T,isMap:$,isReadOnly:E,skinPrimaryVariantColorAsRGB:A,isSectionBreakout:L,isFrozen:R,isDraggingPostInNonManuallySortedWall:W,canIModerate:F,canIPost:G,sectionBeingRenamedId:H,canEditSectionNameInline:U,xSectionSpecificButtons:N,sectionUnderActionId:V,sectionUnderActionRightClickCoordinates:q,shouldHideSectionButtonsWhenDragging:Y,handleOpenSectionActionMenu:X,startEditingSectionTitle:function(e){e&&k.startRenamingSection(e)},finishEditingSectionTitle:function(e){if(null==H.value)return;k.editSectionTitle({sectionId:H.value,title:e})&&k.stopRenamingSection()},$el:Z,addPostButtonRef:K,emitHeaderResize:J,sectionAddPostButton:Q,sectionActionsButton:ee,sectionSpecificButtons:te,sectionTitleRef:oe,OzBaseButton:l.b,OzPlainButtonColorScheme:s.OzPlainButtonColorScheme,OzPlainButtonSizePreset:s.OzPlainButtonSizePreset,OzSkewedButtonSizePreset:c.OzSkewedButtonSizePreset,SurfaceSectionTitle:f.a}}}),O=(o(1779),o(13)),y=Object(O.a)(x,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("header",{ref:"$el",class:{flex:!0,"flex-col":o.isGrid,"flex-row items-end":!o.isGrid,"justify-between":o.isMap},on:{"long-press":function(t){return e.$emit("long-press",t)}}},[t(o.SurfaceSectionTitle,{ref:"sectionTitleRef",class:[o.isMap&&"me-3 desktop:me-2.5","surface-group-title",o.isGrid&&"max-w-[calc(100%-6px)]"],attrs:{id:e.section.ariaLabelledby,"section-id":e.section.id,"background-color":e.useDefaultBgColor?void 0:o.skinPrimaryVariantColorAsRGB||o.backgroundColor,"can-edit":o.canIModerate&&!o.isFrozen&&!o.surfaceDemoPadletPanelStore.isDemoPadletPanelDesktop,"can-edit-inline":o.canEditSectionNameInline,"dark-mode":"dark"===o.backgroundLuminance,dir:o.dir,"edit-mode":e.section.id===o.sectionBeingRenamedId,"x-more-button":!o.isReadOnly&&!o.surfaceDemoPadletPanelStore.isDemoPadletPanelDesktop,"font-id":o.fontId,format:o.format,title:e.section.title},on:{"open-actions":function(t){return o.handleOpenSectionActionMenu(e.section.id)},"open-actions-at-coordinates":t=>o.handleOpenSectionActionMenu(e.section.id,t),"start-editing":function(t){return o.startEditingSectionTitle(e.section.id)},"finish-editing":o.finishEditingSectionTitle,"cancel-editing":function(e){return o.surfaceSectionsStore.stopRenamingSection()},resize:o.emitHeaderResize}}),e._v(" "),o.xSectionSpecificButtons?t("div",{class:["flex flex-row space-s-1 surface-section-action-buttons",o.shouldHideSectionButtonsWhenDragging&&"invisible"]},e._l(o.sectionSpecificButtons,(function(e){return t(o.isMap?o.OzPlainButton:o.OzSkewedButton,{key:e.id,tag:"component",class:["shrink-0",o.isMap?["w-6 h-6 p-1"]:["transition-shadow motion-reduce:transition-none",{"hover-overlay-light":"light"===o.backgroundLuminance,"hover-overlay-dark":"dark"===o.backgroundLuminance}]],style:!o.isMap&&{backgroundColor:o.skinPrimaryVariantColorAsRGB||o.backgroundColor},attrs:{id:e.id,"data-testid":e.testId,"size-preset":o.isMap?o.OzPlainButtonSizePreset.H24px:o.OzSkewedButtonSizePreset.H40px,"color-scheme":o.isMap&&o.OzPlainButtonColorScheme.Secondary,title:e.label,"aria-label":e.label,"dark-mode":o.isMap?"dark"===o.colorScheme:"dark"===o.backgroundLuminance,dir:o.dir},on:{click:e.onClick}},[t(o.OzIcon,{attrs:{name:e.icon,size:16}})],1)})),1):e._e(),e._v(" "),o.isGrid&&o.sectionAddPostButton.shouldShow&&!o.surfaceDemoPadletPanelStore.isDemoPadletPanelDesktop?t(o.OzBaseButton,{ref:"addPostButtonRef",class:["flex","items-center","justify-center","transition-all motion-reduce:transition-none","mt-3 tablet-portrait:mt-4","rounded-lg","w-full h-8","p-0",{"bg-[rgba(255,255,255,0.32)]":"light"===o.backgroundLuminance,"bg-[rgba(0,0,0,0.24)]":"dark"===o.backgroundLuminance},"backdrop-blur-sm",{"text-dark-text-200":"light"===o.backgroundLuminance,"text-light-text-200":"dark"===o.backgroundLuminance},{"hover-hover:hover:bg-light-ui-100":"light"===o.backgroundLuminance,"hover-hover:hover:bg-dark-ui-100":"dark"===o.backgroundLuminance},{"hover-hover:hover:text-dark-text-100":"light"===o.backgroundLuminance,"hover-hover:hover:text-light-text-100":"dark"===o.backgroundLuminance},"focus-visible:outline-none","focus-visible:ring-2",{"ring-grape-500":"light"===o.backgroundLuminance,"ring-canary-500":"dark"===o.backgroundLuminance},{"hover-hover:active:bg-grape-500":"light"===o.backgroundLuminance,"hover-hover:active:bg-canary-500":"dark"===o.backgroundLuminance},{"hover-hover:active:text-light-text-100":"light"===o.backgroundLuminance,"hover-hover:active:text-dark-text-100":"dark"===o.backgroundLuminance}],attrs:{"aria-label":o.sectionAddPostButton.label,title:o.sectionAddPostButton.label},on:{click:o.sectionAddPostButton.onClick}},[t(o.OzIcon,{attrs:{name:o.sectionAddPostButton.icon,size:16}})],1):e._e()],1)}),[],!1,null,"74bfc300",null);t.a=y.exports},1723:function(e,t,o){"use strict";var n=o(0),i=o(1588),a=o(53),r=o(32),l=o(56),s=o(64),c=o(1675),d=o(1607),u=Object(n.defineComponent)({__name:"SurfaceSectionTitle",props:{backgroundColor:{type:String,default:()=>{}},canEdit:{type:Boolean,required:!0},canEditInline:{type:Boolean,required:!0},darkMode:{type:Boolean,required:!0},dir:{type:String,default:"auto"},editMode:{type:Boolean,default:!1},xMoreButton:{type:Boolean,default:!0},fontId:{type:Number,required:!0},format:{type:String,required:!0,validator:e=>["grid","matrix","shelf","stream","map","timeline","timeline_v2"].includes(e)},title:{type:String,required:!0},sectionId:{type:Number,required:!0},id:{type:String,default:()=>{}}},emits:["open-actions","open-actions-at-coordinates","start-editing","finish-editing","cancel-editing","resize"],setup(e,{expose:t,emit:o}){const u=e;t({selectTitleInput:w});const p=Object(n.computed)((()=>"grid"===u.format)),b=Object(n.computed)((()=>"matrix"===u.format)),m=Object(n.computed)((()=>"shelf"===u.format)),v=Object(n.computed)((()=>"stream"===u.format)),h=Object(n.computed)((()=>"map"===u.format)),f=Object(n.computed)((()=>"timeline"===u.format||"timeline_v2"===u.format)),g=Object(n.computed)((()=>Object(i.a)(h.value?1:u.fontId))),x=Object(n.computed)((()=>(p.value||m.value)&&u.title.length>a.g?u.title.slice(0,a.g)+"\u2026":u.title)),O=Object(n.computed)((()=>!(!u.canEdit||!u.canEditInline)&&u.editMode)),y=Object(n.ref)();function w(){var e;null===(e=y.value)||void 0===e||e.select()}Object(n.watch)(O,(e=>{e&&Object(n.nextTick)((()=>{j.value=u.title,w()}))}),{immediate:!0});const j=Object(n.ref)(u.title),S=Object(n.ref)(u.title);Object(n.watch)((()=>u.title),(e=>{S.value=e,j.value=e}));const k=Object(n.computed)((()=>{const e=j.value.trim();return!(e.length<a.k||e.length>a.g)}));const C=Object(n.ref)(),_=Object(n.ref)(0);function P(){var e,t,o;_.value=(null!==(o=null===(t=null===(e=C.value)||void 0===e?void 0:e.getBoundingClientRect())||void 0===t?void 0:t.height)&&void 0!==o?o:0)*Math.tan(10*Math.PI/180)+5}return Object(d.a)(C,(()=>{P(),o("resize")})),Object(n.onMounted)((()=>{P()})),{__sfc:!0,props:u,emit:o,isGrid:p,isMatrix:b,isShelf:m,isStream:v,isMap:h,isTimeline:f,twFontClass:g,truncatedTitle:x,isBeingEdited:O,titleInput:y,selectTitleInput:w,currentTitle:j,previousTitle:S,isCurrentTitleValid:k,tryEditingInline:function(){u.canEdit&&(u.canEditInline?o("start-editing"):o("open-actions"))},finishEditing:function(){S.value=j.value,o("finish-editing",j.value)},cancelEditing:function(){j.value=S.value,o("cancel-editing")},$el:C,skewedEdgeWidth:_,updateSkewedEdgeWidth:P,finishEditingIfFocusTargetIsOutside:function(e){C.value&&(C.value.contains(e.relatedTarget)||o("finish-editing",j.value))},OzBaseButton:r.b,OzIcon:l.default,OzPlainButton:s.default,OzPlainButtonColorScheme:s.OzPlainButtonColorScheme,OzPlainButtonSizePreset:s.OzPlainButtonSizePreset,MultilineInput:c.a}}}),p=o(13),b=Object(p.a)(u,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("div",{ref:"$el",class:["relative","flex","flex-row",o.isMap&&"overflow-hidden","select-none"],attrs:{id:`section-title-${e.sectionId}`,dir:e.dir},on:{contextmenu:function(t){return t.preventDefault(),e.$emit("open-actions-at-coordinates",t)}}},[t("div",{class:[{grow:o.isGrid||o.isShelf},"flex","items-end",o.isMap&&"overflow-hidden",{"rounded-s-none tablet-portrait:rounded-s-lg":o.isStream||o.isMatrix,"rounded-ss tablet-landscape:rounded-ss-lg":o.isMap,"rounded-s-lg":o.isGrid||o.isShelf},"py-0.75","ps-0.75","pe-0",!e.backgroundColor&&{"bg-light-ui-400":!1===e.darkMode,"bg-dark-ui-400":!0===e.darkMode},o.twFontClass,{"text-dark-text-100":!1===e.darkMode,"text-light-text-100":!0===e.darkMode}],style:{backgroundColor:e.backgroundColor}},[o.isBeingEdited?e._e():t("div",{class:["w-full",{"me-4":e.xMoreButton&&(o.isGrid||o.isShelf)&&!o.isBeingEdited},e.canEdit&&{"hhover:bg-light-text-300":!1===e.darkMode,"hhover:bg-dark-text-300":!0===e.darkMode},{"border-2":o.isStream||o.isMatrix||o.isTimeline||o.isGrid||o.isShelf,"border-[1.5px]":o.isMap},"rounded-md","box-border","border-solid","border-transparent","px-1.5",{"py-0.5":o.isGrid||o.isShelf||o.isStream||o.isTimeline||o.isMatrix,"py-0":o.isMap}],on:{click:o.tryEditingInline,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:o.tryEditingInline.apply(null,arguments)}}},[o.isBeingEdited?e._e():t("h2",{class:[{"text-heading-3":o.isStream||o.isMatrix||o.isTimeline||o.isGrid||o.isShelf,"text-body-extra-small":o.isMap},"font-semibold","break-word-anywhere","whitespace-break-spaces",o.isMap&&"truncate"],attrs:{id:e.id,dir:"auto","data-testid":"sectionTitleText"},domProps:{textContent:e._s(o.truncatedTitle)}})]),e._v(" "),o.isBeingEdited?[t("div",{class:["flex",{grow:o.isGrid||o.isShelf},"items-center",{"border-2":o.isStream||o.isMatrix||o.isTimeline||o.isGrid||o.isShelf,"border-[1.5px]":o.isMap},"rounded-md","box-border","border-solid",o.isCurrentTitleValid&&{"border-grape-500":!1===e.darkMode,"border-canary-500":!0===e.darkMode},!o.isCurrentTitleValid&&"border-danger-100","px-1.5",{"py-0.5":o.isGrid||o.isShelf||o.isStream||o.isTimeline||o.isMatrix,"py-0":o.isMap},{"bg-light-ui-100":!1===e.darkMode,"bg-dark-ui-100":!0===e.darkMode}]},[t(o.MultilineInput,{ref:"titleInput",class:[{grow:o.isGrid||o.isShelf},"m-0",{"max-h-[208px]":o.isGrid||o.isShelf},{"text-heading-3":o.isStream||o.isMatrix||o.isTimeline||o.isGrid||o.isShelf,"text-body-extra-small":o.isMap},"font-semibold",o.twFontClass],attrs:{"dark-mode":e.darkMode,"aria-required":"","aria-label":e.__("Section title"),cols:o.isStream||o.isMatrix||o.isTimeline||o.isMap?o.currentTitle.length+1:void 0,"data-testid":"surfaceSectionRenameMultilineInput"},on:{blur:o.finishEditingIfFocusTargetIsOutside,escape:o.cancelEditing,enter:o.finishEditing,paste:function(e){e.stopPropagation()}},model:{value:o.currentTitle,callback:function(e){o.currentTitle=e},expression:"currentTitle"}})],1),e._v(" "),o.isMap?e._e():t(o.OzPlainButton,{class:["ms-1","shrink-0","py-1.5"],attrs:{"color-scheme":o.OzPlainButtonColorScheme.SecondaryIcon,"size-preset":o.OzPlainButtonSizePreset.H32px,"dark-mode":e.darkMode,text:e.__("Done")},on:{blur:o.finishEditingIfFocusTargetIsOutside,click:function(e){return e.stopPropagation(),o.finishEditing.apply(null,arguments)}}})]:e._e()],2),e._v(" "),t("div",{class:["z-underneath","flex-none","w-3","rounded-[5px]",{"rounded-s-none":o.isStream||o.isMatrix||o.isTimeline||o.isGrid||o.isShelf,"rounded-s-none rounded-ee-none":o.isMap},!e.backgroundColor&&{"bg-light-ui-400":!1===e.darkMode,"bg-dark-ui-400":!0===e.darkMode},{"origin-bottom-left":"ltr"===e.dir,"origin-bottom-right":"rtl"===e.dir,"origin-bottom-left rtl:origin-bottom-right":"auto"===e.dir},{"skew-x-[10deg]":"ltr"===e.dir,"skew-x-[-10deg]":"rtl"===e.dir,"skew-x-[10deg] rtl:skew-x-[-10deg]":"auto"===e.dir}],style:{backgroundColor:e.backgroundColor,width:`${o.skewedEdgeWidth}px`,willChange:"transform"}}),e._v(" "),e.xMoreButton&&(o.isGrid||o.isShelf)&&!o.isBeingEdited?t(o.OzBaseButton,{class:["absolute","top-[3.25px]","flex","items-center","justify-center","w-6 h-6.5",{"rotate-[-10deg]":"ltr"===e.dir,"rotate-[10deg]":"rtl"===e.dir,"rotate-[-10deg] rtl:rotate-[10deg]":"auto"===e.dir},"bg-transparent","focus-visible:outline-none","rounded-lg","focus-visible:ring-2",{"ring-grape-500":!1===e.darkMode,"ring-canary-500":!0===e.darkMode},"leading-none",{"text-dark-text-200":!1===e.darkMode,"text-light-text-200":!0===e.darkMode},{"hover-hover:hover:text-dark-text-100":!1===e.darkMode,"hover-hover:hover:text-light-text-100":!0===e.darkMode},{"active:text-grape-500":!1===e.darkMode,"active:text-canary-500":!0===e.darkMode}],style:{["rtl"===e.dir?"left":"right"]:o.skewedEdgeWidth-5+"px"},attrs:{id:`section-action-menu-button-${e.sectionId}`,"data-testid":`${e.title}SectionTitleMoreButton`,"aria-label":e.__("Open section actions menu"),title:e.__("Section actions")},on:{click:function(t){return t.stopPropagation(),e.$emit("open-actions-at-coordinates",t)},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),t.preventDefault(),e.$emit("open-actions"))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:(t.stopPropagation(),t.preventDefault(),e.$emit("open-actions"))}]}},[t(o.OzIcon,{attrs:{name:"more_vertical",size:16}})],1):e._e()],1)}),[],!1,null,null,null);t.a=b.exports},1730:function(e,t,o){"use strict";var n=o(87),i=o(466);t.a=function(e,t){return e&&e.length?Object(i.a)(e,Object(n.a)(t,2)):[]}},1751:function(e,t,o){"use strict";o.d(t,"a",(function(){return l}));var n=o(25),i=o(42),a=o(9),r=o(0);function l(){const e=Object(n.useSurfaceStore)(),t=Object(i.a)(),{format:o,newPostLocation:l}=Object(a.g)(e),{newestPostCid:s}=Object(a.g)(t);Object(r.watch)(s,(e=>{"bottom"!==l.value&&"timeline"!==o.value||Object(r.nextTick)((()=>{var t;const o=null!==(t=document.getElementById(`wish-${e}`))&&void 0!==t?t:document.getElementById("wish-new");null===o||void 0===o||o.scrollIntoView({behavior:"auto",block:"start",inline:"nearest"})}))}))}},1779:function(e,t,o){"use strict";o(1694)},1780:function(e,t,o){"use strict";o.d(t,"a",(function(){return M}));var n=o(1600),i=o(16),a=o(1),r=o(1622),l=o(96),s=o(709),c=o(202),d=o(1668),u=o(17),p=o(25),b=o(274),m=o(67),v=o(42),h=o(770),f=o(223),g=o(48),x=o(222),O=o(1669),y=o(1927),w=o(2955),j=o(9),S=o(1819),k=o(0);const C="group-posts-",_=".wish-wrapper",P=".wish-v2",B=80;function M({onDragStart:e,onDragEnd:t,format:o="stream"}){const M=Object(y.a)("surfacePostsDragSortableInGroups"),{forceChangeCursor:D,resetCursor:z}=Object(O.a)(),I=Object(u.b)(),T=Object(g.a)(),{backgroundLuminance:$,isPostSizeWide:E}=Object(j.g)(Object(p.useSurfaceStore)()),{areWishesManuallySorted:A,isSectionedAndNonmanualSorted:L}=Object(j.g)(Object(x.a)()),{isAPostDragging:R,postCidBeingDragged:W,groupIdUnderPostBeingDragged:F,shouldDisableDraggingPost:G}=Object(j.g)(Object(h.a)()),{postEntitiesById:H}=Object(j.g)(Object(v.a)()),{searchTerm:U}=Object(j.g)(Object(f.b)()),{hasSelectedFilters:N}=Object(j.g)(Object(b.a)()),V=Object(k.computed)((()=>Object(d.f)("dark"===$.value))),q=Object(k.computed)((()=>L.value&&("stream"===o||"grid"===o||"matrix"===o||"timeline"===o)));let Y=null,X=null,Z=null,K=null,J=null,Q=null;let ee=null,te=null;function oe({startOffset:e,endOffset:t,wishGapMobile:i,wishGapDesktop:a}){var l,s;const c=i/2,d=a/2;let u="";if("grid"===o){const e=null!==(l=null===te||void 0===te?void 0:te.getBoundingClientRect().width)&&void 0!==l?l:E.value?r.b:r.a;u+=`\n      ${_}.sortable-indicator-line {\n        max-width: ${e}px;\n      }\n      ${_}.sortable-indicator-line:first-child {\n        inset-inline-start: 0;\n        inset-inline-end: 14px;\n      }\n      @media (min-width: 768px) {\n        ${_}.sortable-indicator-line:first-child {\n          inset-inline-start: 0;\n          inset-inline-end: 14px;\n        }\n      }\n      `}else u+=`\n      ${_}.sortable-indicator-line {\n        max-width: ${null!==(s=null===te||void 0===te?void 0:te.getBoundingClientRect().width)&&void 0!==s?s:0}px;\n      }\n      `;u+=`\n      ${_}.sortable-indicator-line:first-child + ${_}:not(.sortable-indicator-line) {\n        margin-top: 0 !important;\n      }\n      ${_}.sortable-indicator-line {\n        visibility: hidden;\n        height: 2px;\n        position: relative;\n        overflow: visible !important;\n        margin-top: ${c-1}px !important;\n        margin-bottom: ${-c-1}px !important;\n      }\n      ${_}.sortable-indicator-line:first-child {\n        position: absolute;\n        margin-top: ${-c-1}px !important;\n        margin-bottom: ${c-1}px !important;\n      }\n      @media (min-width: 768px) {\n        ${_}.sortable-indicator-line {\n          margin-top: ${d-1}px !important;\n          margin-bottom: ${-d-1}px !important;\n        }\n        ${_}.sortable-indicator-line:first-child {\n          position: absolute;\n          margin-top: ${-d-1}px !important;\n          margin-bottom: ${d-1}px !important;\n        }\n      }\n      ${_}.sortable-indicator-line::before {\n        content: '';\n        visibility: visible;\n        border-bottom: 2px solid ${V.value};\n        height: 0;\n        position: absolute;\n        top: 0;\n        inset-inline-start: ${-e}px;\n        inset-inline-end: ${-t}px;\n      }\n      ${_}.sortable-indicator-line > div::before {\n        content: '';\n        visibility: visible;\n        position: absolute;\n        height: 6px;\n        width: 6px;\n        background: ${V.value};\n        border-radius: 6px;\n        top: -2px;\n        inset-inline-start: ${-e}px;\n      }\n      ${_}.sortable-indicator-line > div::after {\n        content: '';\n        visibility: visible;\n        position: absolute;\n        height: 6px;\n        width: 6px;\n        background: ${V.value};\n        border-radius: 6px;\n        top: -2px;\n        inset-inline-end: ${-t}px;\n      }\n      `,K=Object(n.a)(u)}function ne({wishGapMobile:e,wishGapDesktop:t}){var i;const a="matrix"===o?-e/2-1:e/2-1,r=-e/2+1,l="matrix"===o?-t/2-1:t/2-1,s=-t/2+1,c="matrix"===o?a:-e/2,d="matrix"===o?r:-e/2,u="matrix"===o?l:-t/2,p="matrix"===o?s:-t/2;"grid"===o&&(Z=Object(n.a)(`\n        ${_}.sortable-indicator-line {\n          width: 0px;\n        }\n        ${_}.sortable-indicator-line + ${_} {\n          margin-inline-start: 0px;\n        }\n      `)),K=Object(n.a)(`\n      ${_}.sortable-indicator-line {\n        visibility: hidden;\n        width: 0px;\n        height: ${null!==(i=null===te||void 0===te?void 0:te.getBoundingClientRect().height)&&void 0!==i?i:0}px;\n        margin-inline-start: ${a}px !important;\n        margin-inline-end: ${r}px !important;\n        position: relative;\n        overflow-x: visible !important;\n      }\n      ${_}.sortable-indicator-line > div > div {\n        display: none;\n      }\n       ${_}.sortable-indicator-line:first-child {\n        margin-inline-start: ${c}px !important;\n        margin-inline-end: ${d}px !important;\n      }\n      @media (min-width: 768px) {\n      ${_}.sortable-indicator-line {\n          margin-inline-start: ${l}px !important;\n          margin-inline-end: ${s}px !important;\n        }\n        ${_}.sortable-indicator-line:first-child {\n          margin-inline-start: ${u}px !important;\n          margin-inline-end: ${p}px !important;\n        }\n      }\n      ${_}.sortable-indicator-line::before {\n        content: '';\n        visibility: visible;\n        border-left: 2px solid ${V.value};\n        width: 0;\n        position: absolute;\n        top: 0;\n        top: -6px;\n        bottom: -6px;\n      }\n      ${_}.sortable-indicator-line > div::before {\n        content: '';\n        visibility: visible;\n        position: absolute;\n        height: 6px;\n        width: 6px;\n        background: ${V.value};\n        border-radius: 6px;\n        left: -2px;\n        top: -6px;\n      }\n      ${_}.sortable-indicator-line > div::after {\n        content: '';\n        visibility: visible;\n        position: absolute;\n        height: 6px;\n        width: 6px;\n        background: ${V.value};\n        border-radius: 6px;\n        left: -2px;\n        bottom: -6px;\n      }\n      `)}function ie(){"stream"===o&&oe({startOffset:6,endOffset:6,wishGapMobile:8,wishGapDesktop:16}),"matrix"===o&&ne({wishGapMobile:8,wishGapDesktop:8}),"timeline"===o&&ne({wishGapMobile:8,wishGapDesktop:16}),"grid"===o&&oe({startOffset:-4,endOffset:-14,wishGapMobile:8,wishGapDesktop:8})}let ae=0,re=0;function le(e,t){return e-t}let se=0,ce=0,de=null;let ue=0,pe=0,be=null;function me(e,t={revertToOriginalDragPosition:!1}){null!=de&&de!==be&&(de.scrollTop=ce);const o=le(e.item.offsetTop,ue);if(null!=be)if(t.revertToOriginalDragPosition)be.scrollTop=ce;else{const e=o-be.offsetTop+ae-pe;be.scrollTop=e}ue=0}const ve=new Map;let he=!1;function fe(r){const s=new S.a(r,Object.assign(Object.assign({},Object(d.g)("post",o)),{disabled:G.value,group:"sortable-group",filter:d.a,preventOnFilter:!1,ghostClass:"sortable-indicator-line",dragClass:"sortable-dragging-clone",handle:P,fallbackOnBody:"grid"===o,onStart:t=>{const i=Object(d.l)(t);W.value=i.postCid,null===e||void 0===e||e(i),function(e){var t,n;de="grid"===o?e.from:document.getElementById(d.c),se=e.item.getBoundingClientRect().top-(null!==(t=null===de||void 0===de?void 0:de.offsetTop)&&void 0!==t?t:0),ce=null!==(n=null===de||void 0===de?void 0:de.scrollTop)&&void 0!==n?n:0}(t),function(e){var t,i,a,r;const l="grid"===o?e.from:document.getElementById(d.c),s=e.from.dataset.id;if("grid"!==o&&(null===l||void 0===l?void 0:l.scrollHeight)===(null===l||void 0===l?void 0:l.offsetHeight))return;const c=null!==(t=e.item.querySelector(P).getBoundingClientRect().height)&&void 0!==t?t:0,u=e.originalEvent;let p=0,b=c;c>B?(ae=(null!==(i=u.pageY)&&void 0!==i?i:0)-(null!==(r=null===(a=(null===u||void 0===u?void 0:u.target).closest(".surface-post"))||void 0===a?void 0:a.getBoundingClientRect().top)&&void 0!==r?r:0),p=Math.max(0,ae-B/2),b=Math.min(c,p+B),p=b-B,re=p):(ae=0,re=0),J=Object(n.a)(`\n      ${"grid"===o?`#section-${null!==s&&void 0!==s?s:0}`:""} ${_}:not(.sortable-dragging-clone) > ${P}{\n        overflow: hidden;\n        max-height: ${B}px;\n      }\n      .sortable-dragging-clone > *:first-child {\n        clip-path: inset(${p}px 0px ${c-b}px 0px round 12px);\n      }\n    `)}(t),function(e){const{cloneWrapperElement:t,cloneTargetElement:o}=Object(d.e)(e,P);ee=t,te=o;const n=Object(c.a)(ee,(()=>{null!=ee&&(ee.scrollTop=re),null===n||void 0===n||n.disconnect()}))}(t),D("grabbing"),!q.value&&ie(),q.value&&function(){let e="";e+=`\n     ${_}.sortable-indicator-line {\n        display: none;\n      }\n    `,"grid"===o||"stream"===o?e+=`\n        ${_}.sortable-indicator-line:first-child + ${_}:not(.sortable-indicator-line) {\n        margin-top: 0 !important;\n      }\n    `:"timeline"===o&&(e+=`\n        ${_}.sortable-indicator-line:first-child + ${_}:not(.sortable-indicator-line) {\n        margin-inline-start: 0 !important;\n      }\n    `),K=Object(n.a)(e)}(),function(e){if(null!=de&&null!=ee){const e=le(ee.offsetTop-de.offsetTop,se);de.scrollTop=e-re}}()},onMove:e=>{var t;if(q.value){const o=null!==(t=e.to.dataset.id)&&void 0!==t?t:"",n=parseInt(o);F.value=n}return!!function(e){var t;if(L.value)return!0;const o=e.dragged,n=e.related;if(Object(d.j)(n))return!0;const i=o.dataset.id,a=n.dataset.id,r=null==i?void 0:H.value[i],s=null==a?void 0:H.value[a];if(null==r||null==s||r.cid===s.cid)return!1;const c=T.sectionEntities[null!==(t=null===s||void 0===s?void 0:s.wall_section_id)&&void 0!==t?t:-1];return null!=(null===c||void 0===c?void 0:c.id)&&(!!(Object(l.a)(r)&&!T.hasPinnedPosts(c.id)&&Object(d.i)(e)||!Object(l.a)(r)&&!T.hasUnpinnedPosts(c.id)&&Object(d.h)(e))||!(Object(l.a)(r)&&!Object(l.a)(s)||!Object(l.a)(r)&&Object(l.a)(s)))}(e)&&("matrix"===o&&function(e){!1===e.willInsertAfter&&e.relatedRect.left===e.to.getBoundingClientRect().left&&(null===Z||void 0===Z||Z.remove(),Z=Object(n.a)(`\n      ${_}.sortable-indicator-line {\n        width: 1px;\n      }\n       ${_}.sortable-indicator-line + ${_} {\n        margin-inline-start: -1px;\n      }`)),!0===e.willInsertAfter&&e.relatedRect.right===e.to.getBoundingClientRect().right&&(null===Z||void 0===Z||Z.remove(),Z=Object(n.a)(`\n      ${_}.sortable-indicator-line {\n        width: 0px;\n      }\n       ${_}.sortable-indicator-line + ${_} {\n        margin-inline-start: 0px;\n      }`))}(e),"grid"!==o||function(e){if(!i.a.safari)return!0;if(null==e.target)return!0;const t=e.target;return!(e.relatedRect.top>t.scrollTop+t.scrollHeight)}(e))},onChoose(e){A.value&&!G.value||(Y=document.createComment("dragged-item-placeholder"),e.item.after(Y))},onEnd:e=>{null!=ee&&(ee.remove(),ee=null),function(e){var t;be="grid"===o?e.to:document.getElementById(d.c),ue=e.item.getBoundingClientRect().top-(null!==(t=null===be||void 0===be?void 0:be.offsetTop)&&void 0!==t?t:0);const n=e.originalEvent;pe=n.pageY-e.item.getBoundingClientRect().top}(e),null===Q||void 0===Q||Q.remove(),Q=null,null===Z||void 0===Z||Z.remove(),Z=null,null===K||void 0===K||K.remove(),K=null,z(),null===J||void 0===J||J.remove(),J=null;const n=function(e){const t=e.from===e.to,o=""!==U.value||N.value,n=!A.value&&t&&null!=Y;if((n||o||G.value)&&(null===Y||void 0===Y||Y.replaceWith(e.item),R.value=!1),null===Y||void 0===Y||Y.remove(),Y=null,F.value=void 0,G.value){const e=Oe.value?o?Object(a.b)("Cannot reorder filtered posts."):Object(a.b)("Cannot reorder sorted posts."):Object(a.b)("Cannot reorder posts.");I.setSnackbar({message:e,notificationType:u.a.error})}return n||G.value}(e);if(n)return me(e,{revertToOriginalDragPosition:!0}),void(W.value=void 0);me(e,{revertToOriginalDragPosition:!1}),null===t||void 0===t||t(Object(d.l)(e)),W.value=void 0}}));ve.set(r.id,s)}function ge(...e){M.log(e.map((e=>e.id)));e.map((e=>document.getElementById(`${C}${e.id}`))).filter((e=>null!=e)).forEach((e=>{ve.has(e.id)||fe(e)}))}const{isOverlayVisible:xe}=Object(j.g)(Object(p.useSurfaceStore)()),{canIModerate:Oe}=Object(j.g)(Object(m.a)()),{sortedGroups:ye}=Object(j.g)(Object(x.a)());Object(k.watch)(ye,((e,t)=>{M.log("sortedGroups",ye),M.log("sortedGroups - initialized",he),he&&Object(k.nextTick)((()=>{null!=t?(ge(...Object(w.a)(e,t,"id")),function(...e){e.forEach((e=>{var t;const o=`${C}${e.id}`;null===(t=ve.get(o))||void 0===t||t.destroy(),ve.delete(o)}))}(...Object(w.a)(t,e,"id"))):ge(...e)}))})),Object(k.watch)([xe,G],(([e,t])=>{e||t?ve.forEach((e=>e.option("disabled",!0))):ve.forEach((e=>e.option("disabled",!1)))})),Object(k.onMounted)((()=>{Object(k.nextTick)((()=>{Object(s.a)((()=>{X=Object(n.a)(`\n        ${_}.sortable-persistent-clone {\n          opacity: 0.5;\n        }\n        ${_}.sortable-dragging-clone {\n          opacity: 1 !important;\n          transform: rotate(-2deg);\n          box-shadow: none !important;\n          filter: drop-shadow(0px 16px 32px rgba(0, 0, 0, 0.32));\n        }\n      `),function(){var e;if(he)return;const t=null===(e=document.getElementById(d.d))||void 0===e?void 0:e.querySelectorAll(d.b);null===t||void 0===t||t.forEach((e=>{ve.has(e.id)||fe(e)})),M.log("number of groups initialized",null===t||void 0===t?void 0:t.length),he=!0}()}))}))})),Object(k.onUnmounted)((()=>{null===X||void 0===X||X.remove(),X=null,ve.forEach((e=>e.destroy())),ve.clear(),he=!1}))}},1781:function(e,t,o){"use strict";o.d(t,"a",(function(){return m}));var n=o(1600),i=o(1668),a=o(25),r=o(67),l=o(34),s=o(1669),c=o(9),d=o(1819),u=o(0);const p=".surface-group-title",b=".surface-section";function m({onDragStart:e,onDragEnd:t}){const{forceChangeCursor:o,resetCursor:m}=Object(s.a)(),{backgroundLuminance:v,dir:h,format:f,isOverlayVisible:g}=Object(c.g)(Object(a.useSurfaceStore)()),{canIDragSections:x}=Object(c.g)(Object(r.a)()),O=Object(u.computed)((()=>Object(i.f)("dark"===v.value))),y=Object(u.computed)((()=>"rtl"===h.value));let w=null,j=null,S=null,k=null,C=null,_=null,P=null,B=null,M=null;function D(){var e,t;S=Object(n.a)("\n    .wish-list-scrolling-wrapper, .group-posts {\n      visibility: hidden;\n      height: 0;\n      margin: 0;\n    }"),k=Object(n.a)("\n      .surface-section-action-buttons {\n        visibility: hidden;\n        height: 0;\n        margin: 0;\n      }\n    ");const o="timeline"===f.value||"timeline_v2"===f.value?`\n      ${b}.sortable-indicator-line:first-child {\n        margin: 8px 0 0px !important;\n      }\n      @media (max-width: ${l.a.TabletPortrait}px) {\n        ${b}.sortable-indicator-line:first-child {\n          margin-top: -8px !important;\n        }\n      }\n      ${b}.sortable-indicator-line:first-child + ${b} {\n        margin-top: 16px !important;\n      }\n      ${b}.sortable-indicator-line:not(:first-child){\n        margin: -4px 0 4px !important;\n      }`:`\n      ${b}.sortable-indicator-line:first-child {\n        margin-top: -8px !important;\n      }\n      ${b}.sortable-indicator-line:first-child + ${b} {\n        margin-top: 8px !important;\n      }\n      ${b}.sortable-indicator-line:not(:first-child){\n        margin: 16px 0 -16px !important;\n      }\n    `;_=Object(n.a)(`\n      ${o}\n      ${b}.sortable-indicator-line {\n        visibility: hidden;\n        height: 0;\n        position: relative;\n        overflow: visible !important;\n      }\n      ${b}.sortable-indicator-line > header {\n        visibility: hidden;\n        height: 2px;\n        position: relative;\n        overflow: visible !important;\n      }\n      ${b}.sortable-indicator-line > header::before {\n        content: '';\n        visibility: visible;\n        border-bottom: 2px solid ${O.value};\n        height: 0;\n        width: ${null!==(e=null===I||void 0===I?void 0:I.getBoundingClientRect().width)&&void 0!==e?e:0}px;\n        position: absolute;\n        top: 0;\n        left: auto;\n        right: auto;\n      }\n      ${b}.sortable-indicator-line > header > div {\n        display: none;\n      }\n      ${b}.sortable-indicator-line > header > div:first-child {\n        display: flex;\n        height: 0;\n        width: ${null!==(t=null===I||void 0===I?void 0:I.getBoundingClientRect().width)&&void 0!==t?t:0}px;\n      }\n      ${b}.sortable-indicator-line > header > div:first-child::before {\n        content: '';\n        visibility: visible;\n        position: absolute;\n        height: 6px;\n        width: 6px;\n        background: ${O.value};\n        border-radius: 6px;\n        top: -2px;\n        left: 0px;\n      }\n      ${b}.sortable-indicator-line > header > div:first-child::after {\n        content: '';\n        visibility: visible;\n        position: absolute;\n        height: 6px;\n        width: 6px;\n        background: ${O.value};\n        border-radius: 6px;\n        top: -2px;\n        right: 0px;\n      }\n    `)}let z=null,I=null;function T(e){const{cloneWrapperElement:t,cloneTargetElement:o}=Object(i.e)(e,p);z=t,I=o}let $=0,E=0,A=null;function L(e){const t=(null!==z&&void 0!==z?z:e.item).getBoundingClientRect().top;$=t}function R(e){var t,o,a;const r=null!==z&&void 0!==z?z:e.item,l=document.getElementById(i.c),s=r.getBoundingClientRect().top,c=$-s,d=(null!==(t=null===l||void 0===l?void 0:l.scrollTop)&&void 0!==t?t:0)-c;var u;d<0&&((u=-d)<0||(A=Object(n.a)(`\n      #${i.d} {\n        padding-top: ${u}px;\n      }\n    `))),d+window.innerHeight>(null!==(o=null===l||void 0===l?void 0:l.scrollHeight)&&void 0!==o?o:1/0)&&function(e){e<0||(A=Object(n.a)(`\n      #${i.d} {\n        padding-bottom: ${e}px;\n      }\n    `))}(null!==(a=null===l||void 0===l?void 0:l.scrollHeight)&&void 0!==a?a:0-d-window.innerHeight),null!=l&&(l.scrollTop=d)}function W(){const a=document.getElementById(i.d);w=new d.a(a,Object.assign(Object.assign({},Object(i.g)("section",f.value)),{disabled:!x.value,direction:"grid"===f.value?"horizontal":"vertical",filter:i.a,preventOnFilter:!1,ghostClass:"sortable-indicator-line",dragClass:"sortable-dragging-clone",draggable:b,handle:p,onClone:()=>{Object(i.k)(h.value)},onStart:t=>{null===e||void 0===e||e(Object(i.m)(t)),"timeline"!==f.value&&"timeline_v2"!==f.value||(L(t),M=Object(n.a)(`\n      #${i.c} > .justify-center {\n        justify-content: start !important;\n      }\n    `),T(t),o("grabbing"),D(),R(t)),"grid"===f.value&&(T(t),o("grabbing"),P=Object(n.a)(`\n      ${b} {\n        height: 100% !important;\n      }\n      `),_=Object(n.a)(`\n      ${b}.sortable-indicator-line:first-child {\n        margin-inline: auto 0px !important;\n        transform: translateX(-8px);\n      }\n      ${b}.sortable-indicator-line:first-child + ${b} {\n        margin-left: 0 !important;\n      }\n      ${b}.sortable-indicator-line:not(:first-child) {\n        margin-inline: 0px !important;\n      }\n      ${b}.sortable-indicator-line {\n        visibility: hidden;\n        width: 0;\n        position: relative;\n        overflow: visible !important;\n      }\n      ${b}.sortable-indicator-line::before {\n        content: '';\n        visibility: visible;\n        border-left: 2px solid ${O.value};\n        width: 0;\n        height: 100%;\n        position: absolute;\n        top: 0;\n        left: auto;\n        right: auto;\n      }\n      ${b}.sortable-indicator-line > div:first-child, ${b}.sortable-indicator-line > div:first-child > header {\n        width: 250px;\n      }\n      ${b}.sortable-indicator-line > div:last-child {\n        display: flex;\n        width: 0;\n        height: 100%;\n      }\n      ${b}.sortable-indicator-line > div:last-child::before {\n        content: '';\n        visibility: visible;\n        position: absolute;\n        height: 6px;\n        width: 6px;\n        background: ${O.value};\n        border-radius: 6px;\n        left: -2px;\n        top: 0px;\n      }\n      ${b}.sortable-indicator-line > div:last-child::after {\n        content: '';\n        visibility: visible;\n        position: absolute;\n        height: 6px;\n        width: 6px;\n        background: ${O.value};\n        border-radius: 6px;\n        left: -2px;\n        bottom: 0px;\n      }\n    `)),"matrix"!==f.value&&"stream"!==f.value||(T(t),L(t),o("grabbing"),D(),R(t))},onMove:e=>{},onEnd:e=>{null!=z&&(z.remove(),z=null),function(e){E=e.item.getBoundingClientRect().top}(e),null===P||void 0===P||P.remove(),P=null,null===B||void 0===B||B.remove(),B=null,null===S||void 0===S||S.remove(),S=null,null===k||void 0===k||k.remove(),k=null,null===C||void 0===C||C.remove(),C=null,null===_||void 0===_||_.remove(),_=null,null===M||void 0===M||M.remove(),M=null,m(),null===A||void 0===A||A.remove(),A=null,function(e){var t;const o=null!==z&&void 0!==z?z:e.item,n=document.getElementById(i.c),a=o.getBoundingClientRect().top,r=E-a,l=(null!==(t=null===n||void 0===n?void 0:n.scrollTop)&&void 0!==t?t:0)-r;null!=n&&(n.scrollTop=l)}(e),null===t||void 0===t||t(Object(i.m)(e))}}))}Object(u.watch)([g,x],(([e,t])=>{e||!t?null===w||void 0===w||w.option("disabled",!0):null===w||void 0===w||w.option("disabled",!1)})),Object(u.onMounted)((()=>{Object(u.nextTick)((()=>{j="grid"!==f.value?Object(n.a)(`\n        ${b}.sortable-persistent-clone {\n          opacity: 0.5;\n        }\n        ${b}.sortable-dragging-clone {\n          opacity: 1 !important;\n          transform: rotate(${y.value?"2deg":"-2deg"});\n          box-shadow: none !important;\n          filter: drop-shadow(0px 16px 32px rgba(0, 0, 0, 0.32));\n        }\n      `):Object(n.a)(`\n        ${b}.sortable-persistent-clone {\n          opacity: 0.5;\n        }\n        ${b}.sortable-dragging-clone {\n          opacity: 1 !important;\n          transform: rotate(${y.value?"2deg":"-2deg"});\n          box-shadow: none !important;\n          filter: drop-shadow(0px 16px 32px rgba(0, 0, 0, 0.32));\n        }\n        ${b}.sortable-dragging-clone header > button {\n          visibility: hidden;\n        }\n        ${b}.sortable-dragging-clone .group-posts {\n          visibility: hidden;\n        }\n      `),W()}))})),Object(u.onUnmounted)((()=>{null===j||void 0===j||j.remove(),j=null,null===w||void 0===w||w.destroy()}))}},1808:function(e,t,o){"use strict";var n=o(0),i=Object(n.defineComponent)({__name:"SurfacePostsDraggablePad",setup:e=>({__sfc:!0})}),a=o(13),r=Object(a.a)(i,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:["wish-list-v2","wish-list","z-wishlist"],attrs:{id:"wish-list",tabindex:"-1"}},[e._t("default")],2)}),[],!1,null,null,null);t.a=r.exports},1810:function(e,t,o){"use strict";o.r(t),o.d(t,"OzSkewedButtonHrefMode",(function(){return a.a})),o.d(t,"OzSkewedButtonSizePreset",(function(){return n}));var n,i=o(0),a=o(32);!function(e){e.H40px="H40px"}(n||(n={}));var r=Object(i.defineComponent)({__name:"OzSkewedButton",props:{ariaLabel:{default:""},darkMode:{type:[Boolean,String],default:"auto"},dir:{default:"auto"},disabled:{type:Boolean,default:!1},href:{default:void 0},hrefMode:{default:a.a.Default},sizePreset:{default:n.H40px}},emits:["focus","blur","mouseenter","mouseleave","click"],setup(e){const t=e,o=Object(i.computed)((()=>t.sizePreset===n.H40px?"rtl"===t.dir?-10:10:0));return{__sfc:!0,SizePreset:n,props:t,skewAngle:o,OzBaseButton:a.b}}}),l=o(13),s=Object(l.a)(r,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t(o.OzBaseButton,{class:["focus-visible:outline-none","py-0","flex","items-center","justify-center",e.sizePreset===o.SizePreset.H40px&&["h-10","px-3.5","rounded-[5px]","focus-visible:ring-[2.5px]",{"skew-x-[10deg]":"ltr"===e.dir,"skew-x-[-10deg]":"rtl"===e.dir,"skew-x-[10deg] rtl:skew-x-[-10deg]":"auto"===e.dir}],{"ring-grape-500":!1===e.darkMode,"ring-canary-500":!0===e.darkMode,"ring-grape-500 dark:ring-canary-500":"auto"===e.darkMode},{"active:!bg-grape-500":!1===e.darkMode,"active:!bg-canary-500":!0===e.darkMode,"active:!bg-grape-500 dark:active:!bg-canary-500":"auto"===e.darkMode},{"text-dark-text-200 active:text-light-text-200":!1===e.darkMode,"text-light-text-200 active:text-dark-text-200":!0===e.darkMode,"text-dark-text-200 dark:text-light-text-200 active:text-light-text-200 dark:active:text-dark-text-200":"auto"===e.darkMode}],attrs:{"aria-label":e.ariaLabel,dir:e.dir,disabled:e.disabled,href:e.href,"href-mode":e.hrefMode},on:{focus:function(t){return e.$emit("focus",t)},blur:function(t){return e.$emit("blur",t)},mouseenter:function(t){return e.$emit("mouseenter",t)},mouseleave:function(t){return e.$emit("mouseleave",t)},click:function(t){return e.$emit("click",t)}}},[t("span",{class:["flex","items-center","justify-center",{"skew-x-[-10deg]":"ltr"===e.dir,"skew-x-[10deg]":"rtl"===e.dir,"skew-x-[-10deg] rtl:skew-x-[10deg]":"auto"===e.dir}]},[e._t("default")],2)])}),[],!1,null,null,null);t.default=s.exports},2507:function(e,t,o){"use strict";o.r(t);var n=o(0),i=o(15),a=o(1622),r=o(210),l=o(25),s=o(164),c=o(42),d=o(770),u=o(48),p=o(222),b=o(89),m=o(1639),v=o(1708),h=o(1808),f=o(1647),g=o(1780),x=o(1751),O=o(1781),y=o(18),w=o(9),j=Object(n.defineComponent)({__name:"SurfacePostsMatrix",props:{reactionIdsByPostId:{default:()=>({})},commentIdsByPostId:{default:()=>({})},xSectionHeader:{type:Boolean,default:!0}},setup(e){const t=Object(c.a)(),o=Object(d.a)(),j=Object(u.a)(),{dir:S,backgroundLuminance:k,isPostSizeStandard:C,isPostSizeWide:_,isSectioned:P,xCommentsUnderPosts:B}=Object(w.g)(Object(l.useSurfaceStore)()),{isAPostDragging:M,groupIdUnderPostBeingDragged:D}=Object(w.g)(o),{allSortedPostsByGroup:z}=Object(w.g)(t),{isASectionDragging:I}=Object(w.g)(j),{sortedGroups:T,wishGroupBy:$}=Object(w.g)(Object(p.a)()),{isContainerSmallerThanTabletPortrait:E,surfaceContainerWidth:A,isContainerSmallerThanTabletLandscape:L,isContainerSmallerThanDesktop:R}=Object(w.g)(Object(s.a)()),{shouldDisplayPost:W,shouldDisplayGroup:F}=t,{canShowDraggingOverlayOnGroup:G}=o,H=Object(n.computed)((()=>{var e;const t=`#section-${D.value}`,o=null===(e=document.querySelector(t))||void 0===e?void 0:e.getBoundingClientRect().height;return o?o+32:0})),U=Object(n.computed)((()=>{var e;const t=`#section-${D.value}`,o=null===(e=document.querySelector(t))||void 0===e?void 0:e.getBoundingClientRect().width;return o?o+32:0}));Object(O.a)({onDragStart:()=>{I.value=!0},onDragEnd:({groupId:e})=>{if(I.value=!1,e){const t=document.querySelector(`#section-${e}`);if(!t)return;const o=r.a.getNewIndex(t);if(!o)return;j.sortSection(o)}}}),Object(g.a)({onDragStart:({groupId:e})=>{M.value=!0,D.value=e},onDragEnd:({postCid:e,postId:o,groupId:n})=>{var i,a,r,l,s,c;if(M.value=!1,e&&o){const d="number"===typeof n&&$.value===y.b.Section?n:void 0,u=null===(r=null===(a=null===(i=document.querySelector(`#wish-${o}`))||void 0===i?void 0:i.closest(".wish-wrapper"))||void 0===a?void 0:a.previousElementSibling)||void 0===r?void 0:r.querySelector(".wish"),p=null===(c=null===(s=null===(l=document.querySelector(`#wish-${o}`))||void 0===l?void 0:l.closest(".wish-wrapper"))||void 0===s?void 0:s.nextElementSibling)||void 0===c?void 0:c.querySelector(".wish"),{sortIndex:m,gapSize:v}=Object(b.b)(`#wish-${o}`,{sectionId:d,prevId:null===u||void 0===u?void 0:u.id,nextId:null===p||void 0===p?void 0:p.id});t.sortPost({postCid:e,sortIndex:null!==m&&void 0!==m?m:void 0,sectionId:d,gapSize:v})}D.value=void 0},format:"matrix"}),Object(x.a)();const N=Object(n.computed)((()=>B.value?78:42)),V=Object(n.computed)((()=>{const e=L.value?0:72,t=A.value-e-14;if(E.value){const e=2;return(t-2*8)/e-(e-1)*8}if(R.value){const e=C.value?4:3,o=C.value?256:380,n=16,i=24;return Math.min((t-2*i)/e-(e-1)*n,o)}if(C.value)return a.a;return Math.min((t-96)/4-48,a.b)}));return{__sfc:!0,surfacePostsStore:t,surfacePostsDragAndDropStore:o,surfaceSectionsStore:j,dir:S,backgroundLuminance:k,isPostSizeStandard:C,isPostSizeWide:_,isSectioned:P,xCommentsUnderPosts:B,isAPostDragging:M,groupIdUnderPostBeingDragged:D,allSortedPostsByGroup:z,isASectionDragging:I,sortedGroups:T,wishGroupBy:$,isContainerSmallerThanTabletPortrait:E,surfaceContainerWidth:A,isContainerSmallerThanTabletLandscape:L,isContainerSmallerThanDesktop:R,shouldDisplayPost:W,shouldDisplayGroup:F,canShowDraggingOverlayOnGroup:G,overlayHeight:H,overlayWidth:U,minHeight:N,minWidth:V,isAppUsing:i.a,SurfaceLazy:m.a,SurfacePostGroupHeaderSection:v.a,SurfacePostsDraggablePad:h.a,SurfacePost:f.a,GroupByTypes:y.b}}}),S=o(13),k=Object(S.a)(j,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t(o.SurfacePostsDraggablePad,{class:["flex","flex-col","items-center","space-y-8 @tablet-portrait/surface-container:space-y-12","mx-auto","box-border","w-full",o.isPostSizeStandard&&"@tablet-portrait/surface-container:max-w-[1136px] @tablet-landscape/surface-container:max-w-[1184px] @desktop/surface-container:max-w-[1088px] @tablet-portrait/surface-container:px-6 @tablet-landscape/surface-container:px-12 @desktop/surface-container:px-0",o.isPostSizeWide&&"@tablet-portrait/surface-container:max-w-[1236px] @desktop/surface-container:max-w-[1680px] @tablet-portrait/surface-container:px-6 @desktop/surface-container:px-12","py-4"],attrs:{dir:o.dir}},[e._l(o.sortedGroups,(function(n){return t("section",{directives:[{name:"show",rawName:"v-show",value:o.shouldDisplayGroup(n),expression:"shouldDisplayGroup(group)"}],key:n.id,class:["relative","flex","flex-col","w-full",{"surface-section":o.wishGroupBy===o.GroupByTypes.Section}],attrs:{id:"section-"+n.id,"data-id":n.id,"data-rank":n.sort_index}},[o.canShowDraggingOverlayOnGroup(n.id)?t("div",{class:["absolute -mt-4 z-underneath","border-solid border-2 rounded-xl shadow-elevation-2","pointer-events-none",{"border-grape-500 bg-modal-overlay-grape-alpha-20":"light"===o.backgroundLuminance,"border-canary-500 bg-modal-overlay-canary-alpha-20":"dark"===o.backgroundLuminance,"-ms-4 ":!o.isContainerSmallerThanTabletPortrait}],style:{height:`${o.overlayHeight}px`,width:o.isContainerSmallerThanTabletPortrait?"calc(100% - 4px)":`${o.overlayWidth}px`}}):e._e(),e._v(" "),o.isSectioned&&e.xSectionHeader?t(o.SurfacePostGroupHeaderSection,{class:["max-w-[calc(100%-.5rem-.375rem)]","@tablet-portrait/surface-container:max-w-[62.5%]"],attrs:{section:n}}):e._e(),e._v(" "),t("div",{class:["flex","flex-wrap",o.isPostSizeStandard&&"gap-2 @tablet-portrait/surface-container:gap-4 mx-2",o.isPostSizeWide&&"gap-2 @tablet-portrait/surface-container:gap-4 @desktop/surface-container:gap-x-4 @desktop/surface-container:gap-y-6",o.isSectioned&&(o.allSortedPostsByGroup[n.id]||[]).length&&"mt-4","mx-2 @tablet-portrait/surface-container:mx-0","group-posts"],attrs:{id:`group-posts-${n.id}`,"data-id":n.id}},[o.isAppUsing("lazyRenderPosts")?[e._l(o.allSortedPostsByGroup[n.id],(function(n,i){return[t(o.SurfaceLazy,{directives:[{name:"show",rawName:"v-show",value:o.shouldDisplayPost(n.cid),expression:"shouldDisplayPost(post.cid)"}],key:n.cid,class:["wish-wrapper","h-[min-content]",o.isPostSizeStandard&&"w-[calc(50%-4px)] @tablet-portrait/surface-container:w-[calc(25%-14px)] @tablet-portrait/surface-container:max-w-[256px]",o.isPostSizeWide&&"w-[calc(50%-4px)] @tablet-portrait/surface-container:w-[calc(33.3%-14px)] @desktop/surface-container:w-[calc(25%-14px)] @tablet-portrait/surface-container:max-w-[380px]"],attrs:{"data-cid":n.cid,"data-id":n.id,"min-height":o.minHeight,"min-width":o.minWidth,"render-immediately":o.isContainerSmallerThanTabletPortrait&&i<2||i<4}},[t(o.SurfacePost,{class:["wish-v2"],attrs:{index:i,post:n,"post-reaction-ids":n.id?e.reactionIdsByPostId[n.id]:[],"post-comment-ids":n.id?e.commentIdsByPostId[n.id]:[]}})],1)]}))]:e._l(o.allSortedPostsByGroup[n.id],(function(n,i){return t("div",{directives:[{name:"show",rawName:"v-show",value:o.shouldDisplayPost(n.cid),expression:"shouldDisplayPost(post.cid)"}],key:n.cid,class:["wish-wrapper","h-[min-content]",o.isPostSizeStandard&&"w-[calc(50%-4px)] @tablet-portrait/surface-container:w-[calc(25%-14px)] @tablet-portrait/surface-container:max-w-[256px]",o.isPostSizeWide&&"w-[calc(50%-4px)] @tablet-portrait/surface-container:w-[calc(33.3%-14px)] @desktop/surface-container:w-[calc(25%-14px)] @tablet-portrait/surface-container:max-w-[380px]"],attrs:{"data-cid":n.cid,"data-id":n.id}},[t(o.SurfacePost,{class:["wish-v2"],attrs:{index:i,post:n,"post-reaction-ids":n.id?e.reactionIdsByPostId[n.id]:[],"post-comment-ids":n.id?e.commentIdsByPostId[n.id]:[]}})],1)}))],2)],1)})),e._v(" "),t("div",{key:"wish-sizer",staticClass:"wish-sizer"})],2)}),[],!1,null,null,null);t.default=k.exports},3087:function(e,t,o){"use strict";o.r(t);var n=o(0),i=o(16),a=o(14),r=o(25),l=o(102),s=o(67),c=o(222),d=o(1683),u=o(2507),p=o(1725),b=o(18),m=o(9),v=Object(n.defineComponent)({__name:"SurfaceContainerMatrix",props:{reactionIdsByPostId:{default:()=>({})},commentIdsByPostId:{default:()=>({})}},emits:["scroll"],setup(e){const t=Object(a.b)((()=>o.e(17).then(o.bind(null,3114)))),{xHeader:n,backgroundLuminance:v,isReadOnly:h,isPostSizeWide:f,isPostSizeStandard:g,isFrozen:x}=Object(m.g)(Object(r.useSurfaceStore)()),{canIModerate:O}=Object(m.g)(Object(s.a)()),{wishGroupBy:y}=Object(m.g)(Object(c.a)()),{isDemoPadletPanelDesktop:w}=Object(m.g)(Object(l.e)());return i.a.mobile||Object(p.a)(),{__sfc:!0,SurfaceAddSectionButton:t,xHeader:n,backgroundLuminance:v,isReadOnly:h,isPostSizeWide:f,isPostSizeStandard:g,isFrozen:x,canIModerate:O,wishGroupBy:y,isDemoPadletPanelDesktop:w,SurfaceHeader:d.a,SurfacePostsMatrix:u.default,GroupByTypes:b.b}}}),h=o(13),f=Object(h.a)(v,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("div",{class:{"scrollbar-photo":"light"===o.backgroundLuminance,"scrollbar-photo-dark":"dark"===o.backgroundLuminance,"overflow-x-hidden":!o.isReadOnly},attrs:{id:"wall-container"},on:{scroll:function(t){return e.$emit("scroll",t)}}},[o.xHeader?t(o.SurfaceHeader):e._e(),e._v(" "),t(o.SurfacePostsMatrix,{class:{"pb-8 @tablet-portrait/surface-container:pb-12":o.wishGroupBy===o.GroupByTypes.Section},attrs:{"reaction-ids-by-post-id":e.reactionIdsByPostId,"comment-ids-by-post-id":e.commentIdsByPostId}}),e._v(" "),o.wishGroupBy!==o.GroupByTypes.Section||!o.canIModerate||o.isReadOnly||o.isFrozen?e._e():t("div",{class:["flex","flex-col","items-center","mx-auto","box-border","w-full",o.isPostSizeStandard&&"@tablet-portrait/surface-container:max-w-[1136px] @tablet-landscape/surface-container:max-w-[1184px] @desktop/surface-container:max-w-[1088px] @tablet-portrait/surface-container:px-6 @tablet-landscape/surface-container:px-12 @desktop/surface-container:px-0",o.isPostSizeWide&&"@tablet-portrait/surface-container:max-w-[1236px] @desktop/surface-container:max-w-[1680px] @tablet-portrait/surface-container:px-6 @desktop/surface-container:px-12","pb-16"]},[o.isDemoPadletPanelDesktop?e._e():t("div",{staticClass:"w-full"},[t(o.SurfaceAddSectionButton,{staticClass:"ms-4 @tablet-portrait/surface-container:ms-0"})],1)])],1)}),[],!1,null,null,null);t.default=f.exports},658:function(e,t,o){"use strict";o.r(t),o.d(t,"useZoomRealtimeStore",(function(){return u}));var n=o(22),i=o(437),a=o(97),r=o(2),l=o(8),s=o(192),c=o(9),d=o(0);const u=Object(c.d)("zoomRealtime",(()=>{const e=Object(d.ref)(void 0),t=Object(d.ref)(null),c=Object(d.ref)(void 0),u=Object(d.ref)(void 0),p=Object(d.ref)(!1),b=Object(d.ref)(null),m=e=>{if(null==b.value||!b.value)return;if(!0===u.value)return;const t=e.message.url;(e=>{const t=r.b.location.href;if(r.b.location.href===e)return!1;const o=e=>e.includes("/zoom/landing")||e.includes("/zoom/dashboard");return!o(t)||!o(e)})(t)&&Object(l.y)(t)};function v(e){b.value=e}async function h(){await Object(s.e)();const e=(await o.e(7).then(o.bind(null,124))).default;"inCollaborate"===(await e.getRunningContext()).context?v(!0):v(!1),e.onCollaborateChange((e=>{t(e)}));const t=async e=>{"start"===e.action?(Object(n.a)("Zoom Collaborate Start","Host",a.b.id),Object(s.i)()):["join","leave","end"].includes(e.action)&&Object(s.j)(),v("start"===e.action||"join"===e.action)}}return Object(d.watch)(b,(e=>{var t;null!=e&&e&&!0===u.value&&(null===(t=null===c||void 0===c?void 0:c.value)||void 0===t||t.push("navigate",{url:r.b.location.href}))})),{initializeForZoomDashboardOrLanding:async function(){var o,n,a,l,s,d;const v=r.d.vueStartingState.zoomMeetingId;e.value=r.d.vueStartingState.brahmsToken,null!=v&&(t.value=null!==(o=Object(i.a)({accessToken:e.value}))&&void 0!==o?o:null,null!=t.value&&(null===(n=t.value)||void 0===n||n.connect(),u.value=r.d.vueStartingState.isUserHostingZoomCollaboration,p.value=r.d.vueStartingState.cannotAccessPadlet,await h(),c.value=null===(a=t.value)||void 0===a?void 0:a.channel(`zoom:${v}`),null===(l=c.value)||void 0===l||l.on("new_msg",m),null===(s=c.value)||void 0===s||s.join(),null!=b.value&&b.value&&!0===u.value&&(null===(d=c.value)||void 0===d||d.push("navigate",{url:"/zoom/dashboard"}))))},initializeForSurface:async function(){var e,o,n,i,a;const l=null===(e=r.b.app)||void 0===e?void 0:e.$store,s=null===l||void 0===l?void 0:l.state.realtime;t.value=s.brahmsSocket;const d=null===l||void 0===l?void 0:l.state.zoomMeetingId;null!=d&&(u.value=null===l||void 0===l?void 0:l.state.isUserHostingZoomCollaboration,await h(),c.value=null===(o=t.value)||void 0===o?void 0:o.channel(`zoom:${d}`),null===(n=c.value)||void 0===n||n.on("new_msg",m),null===(i=c.value)||void 0===i||i.join(),null!=b.value&&b.value&&!0===u.value&&(null===(a=c.value)||void 0===a||a.push("navigate",{url:r.b.location.href})))},updateCollaborateModeStatus:v,isInCollaborateMode:b,isUserHostingZoomCollaboration:u,cannotAccessPadlet:p}}))},664:function(e,t,o){"use strict";o.d(t,"a",(function(){return j})),o.d(t,"b",(function(){return O})),o.d(t,"c",(function(){return x})),o.d(t,"d",(function(){return y})),o.d(t,"e",(function(){return f})),o.d(t,"f",(function(){return v}));var n=o(167),i=o(16),a=o(62),r=o(8),l=o(327);const s="https://padlet.net/ajax/libs/KaTeX/0.15.2/katex.min.js",c="https://padlet.net/ajax/libs/KaTeX/0.15.2/katex.min.css";async function d(e){await Promise.all([Object(l.b)(s),Object(l.a)(c)]),katex.render(e.innerText,e,{displayMode:!1})}var u=o(93),p=o(37),b=o(673),m=o(209);const v=e=>{Object(a.a)(e).find("a[href^=h]").attr({target:"_blank",rel:"noopener nofollow ugc"}).each(((e,t)=>{var o,n;const i=null!==(n=null===(o=t.getAttribute("href"))||void 0===o?void 0:o.trim())&&void 0!==n?n:"";Object(p.i)(i)||t.setAttribute("href",h(i))}))},h=e=>Object(r.H)(`https://${p.a}`,{path:"redirect",search:{url:e}}),f=e=>{Object(a.a)(e).find("a[href^=h]").attr({target:"_blank",rel:"noopener nofollow ugc",[b.a]:"external"})},g=e=>{const t=new URL(e),o=t.pathname.split("/");return u.d.test(t.host)&&o.length>3&&"slideshow"===o[3]},x=async e=>{if(!i.a.app)return;const t=e.querySelectorAll("a[href^=h]");for(const i of t){const e=i.getAttribute("href");if(null==e)continue;const t=Object(r.m)(e);if(u.d.test(t))if(a=void 0,"A"===(o=i).tagName&&(null===(a=o.parentElement)||void 0===a?void 0:a.tagName)===m.a.toUpperCase())i.setAttribute(b.a,"profile");else if(g(e))i.setAttribute(b.a,"slideshow");else{const t=await Object(n.a)(e);"padlet"===(null===t||void 0===t?void 0:t.content_subcategory)&&"padlet"!==(null===t||void 0===t?void 0:t.provider_name.toLowerCase())&&i.setAttribute(b.a,"padlet")}}var o,a},O=async e=>{const t=(await o.e(7).then(o.bind(null,124))).default;e.querySelectorAll("a").forEach((e=>{e.addEventListener("click",(o=>{const n=e.href;null!=n&&(o.preventDefault(),t.openUrl({url:n}))}))}))};function y(e){const t=e.querySelectorAll("var");t.length>0&&t.forEach((e=>{null!=e.firstElementChild&&"katex"===e.firstElementChild.className||d(e)}))}const w=/\w+/g;function j(e){if(null==e||0===e.length)return 0;const t=e.match(w);return null!=t?t.length:0}},905:function(e,t,o){"use strict";var n=o(0);const i=e=>{let t=-1,o=-1,n=-1,i=!1,a=!1;const r=e=>{"touch"!==e.pointerType||i||(t=e.x,o=e.y,n=e.timeStamp,i=!0)},l=r=>{setTimeout((()=>{if(a)return void(a=!1);if("touch"!==r.pointerType||!i)return;const l=-1===t||-1===o||-1===n,s=r.x===t&&r.y===o,c=r.timeStamp-n<=300;!l&&s&&c&&(r.target instanceof HTMLElement?r.target.click():e.dispatchEvent(new Event("click",r))),t=-1,o=-1,n=-1,i=!1,a=!1}),0)};e.addEventListener("click",(()=>{a=!0})),e.addEventListener("pointerdown",r),e.addEventListener("pointerup",l),e.$_onPointerDown=r,e.$_onPointerUp=l},a=e=>{null!=e.$_onPointerDown&&(e.removeEventListener("pointerdown",e.$_onPointerDown),e.$_onPointerDown=void 0),null!=e.$_onPointerUp&&(e.removeEventListener("pointerup",e.$_onPointerUp),e.$_onPointerUp=void 0)},r={bind:(e,t)=>{Object(n.nextTick)((()=>{const o=document.documentElement.classList.contains("touchable"),n=null!==e.closest(".fix-click-on-touch");if(!o||!n)return;const a=[e];if("deep"===t.arg)for(const t of e.children)t instanceof HTMLElement&&a.push(t);a.forEach(i)}))},unbind:(e,t)=>{const o=[e];if("deep"===t.arg)for(const n of e.children)n instanceof HTMLElement&&o.push(n);o.forEach(a)}};t.a=r},906:function(e,t,o){"use strict";o.d(t,"a",(function(){return j})),o.d(t,"c",(function(){return k})),o.d(t,"b",(function(){return C}));var n=o(22),i=o(910),a=o(51),r=o(16),l=o(10),s=o(15),c=o(1),d=o(62),u=o(8),p=o(664),b=o(93),m=o(57),v=o(29),h=o(55),f=o(128),g=o(12),x=o(9),O=o(0);const y=new Map,w=e=>{const t=Object(h.a)();r.a.app?t.openLink({url:e,linkType:"external"}):Object(u.y)(e,{target:"_blank"})},j=async(e,t=void 0)=>{var o;try{let i;const r=Object(u.m)(e),{currentUser:l}=Object(x.g)(Object(f.a)());if((null===(o=l.value)||void 0===o?void 0:o.hashid)===t)return Object(n.a)("Link Safety","Visited self-added link","Link",e),void w(e);if(b.d.test(r))return void w(e);if(y.has(e)?i=y.get(e):(i=await g.a.LinkSafetyCheck.checkLinkSafety({url:e}),y.set(e,i)),"false"===i.isSafe){Object(v.c)().openConfirmationDialog(Object.assign(Object.assign({},a.a),{title:Object(c.b)("Danger ahead!"),body:Object(c.b)('<p class="text-body-small-posts">We do not recommend accessing the following link. Our security scanner says the link contains malware.<br><span class="text-dark-text-200 dark:text-light-text-200 line-clamp-3 break-word-anywhere text-ellipsis">%{link}</span></p>',{link:e}),confirmButtonText:Object(c.b)("I accept the risk, continue"),cancelButtonText:Object(c.b)("Stay on Padlet"),afterConfirmActions:[()=>(e=>{Object(n.a)("Link Safety","Visited unsafe link","Link",e),w(e)})(e)],afterCancelActions:[()=>Object(n.a)("Link Safety","Cancelled unsafe link","Link",e)],forceFullWidthButtons:!0,buttonScheme:m.OzConfirmationDialogBoxButtonScheme.Danger}))}else"true"===i.isSafe?Object(n.a)("Link Safety","Visited safe link","Link",e):Object(n.a)("Link Safety","Visited unknown link","Link",e),w(e)}catch(i){w(e),Object(l.a)(i)}},S=async e=>{Object(d.a)(e).find("a[href^=h]").attr({target:"_blank",rel:"noopener nofollow ugc"}).each(((e,t)=>{(async e=>{const t=e.getAttribute("href");null!=t&&""!==t.trim()&&(e.onclick=e=>{e.preventDefault(),j(t)})})(t)}))};async function k(e,t){const o=await Object(i.a)(e);return async function(e){await Object(O.nextTick)(),await Object(O.nextTick)(),Object(s.a)("linkSafetyModal")?S(e):(Object(p.e)(e),Object(p.f)(e)),await Object(p.c)(e),Object(p.d)(e),r.a.zoomApp&&await Object(p.b)(e)}(t),o}async function C(e){await Object(O.nextTick)(),Object(s.a)("linkSafetyModal")?S(e):Object(p.f)(e)}},911:function(e,t,o){},912:function(e,t,o){"use strict";var n=o(0),i=o(906),a=o(905),r=Object(n.defineComponent)({__name:"SurfacePostBody",props:{content:null,darkMode:{type:[Boolean,String],default:"auto"},isTextSelectable:{type:Boolean,default:!1}},setup(e){const t=e,o=a.a,r=Object(n.ref)(),l=Object(n.ref)(t.content),s=async()=>{null!=r.value&&(l.value=await Object(i.c)(t.content,r.value))};return Object(n.watch)((()=>t.content),s),Object(n.onMounted)((()=>{s()})),{__sfc:!0,props:t,vEmitClickOnTouch:o,postBodyRef:r,body:l,performPostUpdateActions:s}}}),l=(o(1173),o(13)),s=Object(l.a)(r,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("p",{directives:[{name:"emit-click-on-touch",rawName:"v-emit-click-on-touch:deep",arg:"deep"}],ref:"postBodyRef",class:{"wish-body-content":!0,"wish-body-content-light dark:wish-body-content-dark":"auto"===e.darkMode,"wish-body-content-light":!1===e.darkMode,"wish-body-content-dark":!0===e.darkMode,"break-words":!0,"whitespace-break-spaces":!0,"text-dark-text-100 dark:text-light-text-100":"auto"===e.darkMode,"text-dark-text-100":!1===e.darkMode,"text-light-text-100":!0===e.darkMode,"select-text":e.isTextSelectable},attrs:{dir:"auto","data-pw":"postBody"},domProps:{innerHTML:e._s(o.body)},on:{click:function(t){return e.$emit("click",t)},dblclick:function(t){return e.$emit("dblclick",t)},keydown:function(t){return e.$emit("keydown",t)}}})}),[],!1,null,null,null);t.a=s.exports}}]);
//# sourceMappingURL=286-3e5492c780a9fc5623b7.chunk.js.map